<!-- Author(s): See <authorgroup> in PPC-elf32abi.sgml -->
<!-- Copyright (c) 2011, Power.org -->
<!-- Permission is granted to copy, distribute and/or modify this document
     under the terms of the GNU Free Documentation License, Version 1.3; with
     no Invariant Sections, with no Front-Cover Texts, and with no Back-Cover 
     Texts. A copy of the license is available in the COPYING.txt file. -->
	
<chapter id="OBJ-FILES"><title>Object Files</title> 
	<sect1 CONDITION="ATR-VLE" id="ELF-Object-Files-VLE">

		<title>EABI Executable and Linking Format (ELF) Object Files</title>

		<para>Implementations supporting VLE mark a per-page TLB entry storage control bit to indicate that a
		memory page holds either VLE Category <emphasis role="bold">or</emphasis> Embedded Category
		instructions.  In this way the instructions in both the VLE category (<citetitle>Book VLE</citetitle>)
		and the Embedded Category (<citetitle>Book III-E</citetitle>) of the Power ISA can coexist in the same
		ELF binary.</para>

		<para>Binding of VLE Category and Embedded Category memory pages to different memory bounds
		requires separation of VLE Category and Embedded Category encodings into different ELF sections,
		allowing easy identification for defining memory management page tables for run-time environments.
		Memory pages of VLE Category and Embedded Category instructions can be freely intermixed. </para>
		
		<para>The VLE encodings also require additional relocation types (see relocations 216 - 233 in
		<emphasis><xref linkend="RELOCATION-TABLE"></emphasis>), which allow the link editor to resolve
		immediate and branch displacement fields in the instruction encoding once a symbol or label address is
		known (at link time).</para>

	</sect1>
	<sect1 CONDITION="ATR-EABI" id="OBJECT-FILE-PROCESSING-EABI">
		<title>EABI Object File Processing</title> 

		<para>An EABI-conforming link editor shall accept as input EABI-conforming and SVR4-conforming relocatable files, and it
		shall produce EABI-conforming shared object files.</para>
	</sect1>
	<sect1 id="ELF-HEAD">

		<title>ELF Header</title> 

		<para>The <emphasis>file class</emphasis> member of the ELF header
		identification array, <varname>e_ident[EI_CLASS]</varname>,
		identifies the ELF file as 32-bit encoded by holding the value 1, defined as class
		<varname>ELFCLASS32</varname>.</para>

		<para>For a big-endian encoded ELF file the <emphasis>data
		encoding</emphasis> member of the ELF header identification array,
		<varname>e_ident[EI_DATA]</varname>, holds the value
		<varname>2</varname>, defined as data encoding <varname>ELFDATA2MSB</varname>.  For a little-endian encoded ELF
		file it holds the value 1, defined as
		data encoding <varname>ELFDATA2LSB</varname>.</para>

		<para>The ELF header <varname>e_flags</varname> member may
		hold the following bit masks that are applicable on the Power Architecture.</para>


		<table frame="none"><title>e_flags Bit Masks</title>
			<tgroup cols='3' colsep='0' rowsep='0'>
				<colspec colwidth='140' colname='c1' align="left">
				<colspec colwidth='60' colname='c2' align="left">
				<colspec colwidth='200' colname='c3' align="left">
				<thead>
					<row rowsep='1'>
						<entry>Mask</entry>
						<entry>Value</entry>
						<entry>Description</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>EF_PPC_EMB</entry>
						<entry>0x80000000</entry>
						<entry>Power Architecture Embedded Flag.</entry>
					</row>

					<row>
						<entry>EF_PPC_RELOCATABLE_LIB</entry>
						<entry>0x00008000</entry>

						<entry> Mark ELF file as relocatable (containing Position Independent
						Code, see <emphasis><xref linkend="ADDRESSING-MODELS"></emphasis>) and
						intended for use in a library.  </entry>

					</row>
					<row>
						<entry>EF_PPC_RELOCATABLE</entry>
						<entry>0x00010000</entry>

						<entry>Mark ELF file as relocatable (containing Position Independent
						      Code, see <emphasis><xref linkend="ADDRESSING-MODELS"></emphasis>).</entry>

					</row>
				</tbody>
			</tgroup>
		</table>
<!--
		<para>An executable file (or shared library) is marked <varname>EF_PPC_RELOCATABLE_LIB</varname> if all
		of the modules in the executable file have this flag.</para>

		<para>Restrictive Text: A module with the <varname>EF_PPC_RELOCATABLE</varname> flag may only be linked
		with modules which have the <varname>EF_PPC_RELOCATABLE</varname> or
		<varname>EF_PPC_RELOCATABLE_LIB</varname> flags.</para> 

		<para>Permissive Text: An executable (or shared library) is marked <varname>EF_PPC_RELOCATABLE</varname>
		if all of the modules in the executable have either the <varname>EF_PPC_RELOCATABLE</varname> or
		<varname>EF_PPC_RELOCATABLE_LIB</varname> flags, but at least one module does not have the
		<varname>EF_PPC_RELOCATABLE_LIB</varname> flag.</para>

		<para>Modules which are marked <varname>EF_PPC_RELOCATABLE_LIB</varname> may be linked with either
		relocatable or nonrelocatable modules.</para>
		-->

		<para CONDITION="ATR-EABI">EABI-conforming ELF files shall have <varname>EF_PPC_EMB</varname> set in
		the <varname>e_flags</varname> member.</para>

		<para>The ELF header <varname>e_machine</varname> member identifies the architecture of the ELF file
		as the Power Architecture by holding the value 20, defined as machine name
		<varname>EM_PPC</varname>.</para>

	</sect1>
	<sect1 id="SPECIAL-SECTIONS"><title>Special Sections</title>
		<para>For the Power Architecture the following special sections with
		their corresponding section types and attributes apply:</para>
<!--		<screen>
Name          Type               Attributes

.got             SHT_PROGBITS       SHF_ALLOC + SHF_WRITE
.sdata           SHT_PROGBITS       SHF_ALLOC + SHF_WRITE
.sbss            SHT_NOBITS         SHF_ALLOC + SHF_WRITE</screen><screen CONDITION="!ATR-LINUX">
.PPC.EMB.apuinfo SHT_NOTE           0 </screen><screen CONDITION="ATR-EABI">
.PPC.EMB.sdata2  SHT_PROGBITS       SHF_ALLOC and possibly SHF_WRITE 
                                    (See Table 4-4)
.PPC.EMB.sdata0  SHT_PROGBITS       SHF_ALLOC + SHF_WRITE
.PPC.EMB.sbss2   SHT_NOBITS         SHF_ALLOC + SHF_WRITE
.PPC.EMB.sbss0   SHT_NOBITS         SHF_ALLOC + SHF_WRITE
.PPC.EMB.seginfo SHT_PROGBITS       0</screen> 

		<screen CONDITION="ATR-SECURE-PLT">
.plt             SHT_PROGBITS       SHF_ALLOC + SHF_WRITE
		</screen>
		<screen CONDITION="ATR-BSS-PLT">
.plt             SHT_NOBITS         SHF_ALLOC + SHF_WRITE + SHF_EXECINSTR
		</screen>-->

		<variablelist id="ELF-SPECIAL-SECTIONS">
			<varlistentry>
				<term><emphasis role="bold">.got</emphasis></term>
				<listitem>

					<para> This section holds the <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis> (GOT). Further information on accessing data in the GOT is contained in <emphasis><xref linkend="DATA-OBJ"></emphasis>.  Information on the layout of
					the Global Offset Table is in <emphasis><xref linkend="GLOBAL-OFFSET-TABLE"></emphasis>.</para>

					<informaltable frame="none">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.got</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_PROGBITS</entry>
								</row>


								<row>
									<entry>sh_flags</entry>
									<entry>SHF_ALLOC &plus; SHF_WRITE</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>



				</listitem>
			</varlistentry>

			<varlistentry>
				<term><emphasis role="bold">.plt</emphasis></term>
				<listitem>

					<para> This section holds the <emphasis><link linkend="PLT">Procedure Linkage Table</link></emphasis> (PLT) (see
					<emphasis><xref linkend="PLT"></emphasis>).</para>

					<informaltable frame="none" CONDITION="ATR-SECURE-PLT">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.plt</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_PROGBITS</entry>
								</row>


								<row>
									<entry>sh_flags</entry>
									<entry>SHF_ALLOC &plus; SHF_WRITE</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>

					<informaltable frame="none" CONDITION="ATR-BSS-PLT">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.plt</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_NOBITS</entry>
								</row>


								<row>
									<entry>sh_flags</entry>
									<entry>SHF_ALLOC &plus; SHF_WRITE &plus; SHF_EXECINSTR</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>

				</listitem>
			</varlistentry>

			<varlistentry>
				<term><emphasis role="bold">.sdata</emphasis></term>
				<listitem>
					<para></para><!-- necessary 'cause stylesheets don't conditionalize the first para.  -->
					<para CONDITION="ATR-LINUX"> Initialized data can be held in this section, which is part of
					the <emphasis><link linkend="SMALL-DATA-AREA">Small Data Area</link></emphasis> (SDA).  Further information is found in <emphasis><xref linkend="SMALL-DATA-AREA"></emphasis>.</para>

					<para CONDITION="ATR-EABI"> Initialized data can be held in this section, which is part of
					the <emphasis><link linkend="SDATA-AND-SBSS-E500">Small Data Area</link></emphasis> (SDA).  Further information is found in <emphasis><xref linkend="SDATA-AND-SBSS-E500"></emphasis>.</para>


					<informaltable frame="none">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.sdata</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_PROGBITS</entry>
								</row>


								<row>
									<entry>sh_flags</entry>
									<entry>SHF_ALLOC &plus; SHF_WRITE</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>


				</listitem>
			</varlistentry>
			<varlistentry>
				<term><emphasis role="bold">.sbss</emphasis></term>
				<listitem>
					<para></para> <!-- necessary 'cause stylesheets don't conditionalize the first para.  -->
					<para CONDITION="ATR-LINUX"> Uninitialized data (set to zero on program
					execution) can be held in this section, which is part of the SDA (Small Data
					Area).  Further information is found in <emphasis><xref linkend="SMALL-DATA-AREA"></emphasis>.</para>

					<para CONDITION="ATR-EABI"> Uninitialized data (set to zero on program
					execution) can be held in this section, which is part of the SDA (Small Data
					Area).  Further information is found in <emphasis><xref linkend="SDATA-AND-SBSS-E500"></emphasis>.</para>

					<informaltable frame="none">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.sbss</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_NOBITS</entry>
								</row>

								<row>
									<entry>sh_flags</entry>
									<entry>SHF_ALLOC &plus; SHF_WRITE</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>

				</listitem>
			</varlistentry>
			<varlistentry>
				<term><emphasis role="bold">.PPC.EMB.apuinfo</emphasis></term>
				<listitem>

					<para> If an APU is required this section will contain records describing which are required for a
					program to execute properly.  See <emphasis><xref linkend="APU-INFORMATION-SECTION"></emphasis> for further details.  </para>


					<informaltable frame="none">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.PPC.EMB.apuinfo</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_NOTES</entry>
								</row>

								<row>
									<entry>sh_flags</entry>
									<entry>0</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>




				</listitem>
			</varlistentry>
		</variablelist>
	</sect1>
	<sect1 CONDITION="ATR-EABI" id="SPECIAL-SECTIONS-EABI">
		<title>Special Embedded Sections</title> 

		<para>In addition to the special sections described in <emphasis><xref linkend="SPECIAL-SECTIONS"></emphasis>, an
		EABI-conforming ELF file shall be allowed to contain the following special
		sections. The SVR4 ABI has reserved for this document any 
		section names beginning with .PPC.EMB.</para>

		<variablelist id="ELF-SPECIAL-EMBEDDED-SECTIONS">
			<varlistentry>
				<term><emphasis role="bold">.PPC.EMB.sdata2</emphasis></term>
				<listitem>

					<para> This section holds initialized read-only small data that contributes
					to the program memory image. The section can, however, be used to hold
					writable data.</para>

					<para>If a link editor creates a .PPC.EMB.sdata2 section that
					combines a .PPC.EMB.sdata2 section whose sh_flags is SHF_ALLOC with a
					.PPC.EMB.sdata2 section whose <varname>sh_flags</varname> is SHF_ALLOC + SHF_WRITE, then
					the resulting .PPC.EMB.sdata2 section's <varname>sh_flags</varname> value shall be
					SHF_ALLOC + SHF_WRITE. See <emphasis><xref linkend="SDATA2-AND-SBSS2-E500"></emphasis>
					for more details.</para>

					<informaltable frame="none">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.PPC.EMB.sdata2</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_PROGBITS</entry>
								</row>


								<row>
									<entry>sh_flags</entry>
									<entry>SHF_ALLOC or</entry>
								</row>

								<row>
									<entry></entry>
									<entry>   or</entry>
								</row>
								<row>
									<entry></entry>
									<entry>SHF_ALLOC &plus; SHF_WRITE</entry>
								</row>

								<row>
									<entry>sh_link</entry>
									<entry>SHF_UNDEF</entry>
								</row>

								<row>
									<entry>sh_addralign</entry>
									<entry>Maximum alignment required by any data item in .PPC.EMB.sdata2</entry>
								</row>

								<row>
									<entry>sh_info</entry>
									<entry>0</entry>
								</row>

								<row>
									<entry>sh_entsize</entry>
									<entry>0</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>

				</listitem>
			</varlistentry>
			<varlistentry>
				<term><emphasis role="bold">.PPC.EMB.sbss2</emphasis></term>
				<listitem>

					<para> The special section .PPC.EMB.sbss2 is intended to hold writable
					small data that contribute to the program memory image and whose initial
					values are 0.  See <emphasis><xref linkend="SDATA2-AND-SBSS2-E500"></emphasis>
					for more details.</para>

					<informaltable frame="none">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.PPC.EMB.sbss2</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_NOBITS</entry>
								</row>

								<row>
									<entry>sh_flags</entry>
									<entry>SHF_ALLOC &plus; SHF_WRITE</entry>
								</row>

								<row>
									<entry>sh_link</entry>
									<entry>SHF_UNDEF</entry>
								</row>

								<row>
									<entry>sh_addralign</entry>
									<entry>Maximum alignment required by any data item in .PPC.EMB.sbss2.</entry>
								</row>

								<row>
									<entry>sh_info</entry>
									<entry>0</entry>
								</row>

								<row>
									<entry>sh_entsize</entry>
									<entry>0</entry>
								</row>

							</tbody>
						</tgroup>
					</informaltable>




				</listitem>
			</varlistentry>

			<varlistentry>
				<term><emphasis role="bold">.PPC.EMB.sdata0</emphasis></term>
				<listitem>

					<para> This section is intended to hold initialized small data that
					contribute to the program memory image and whose addresses are all
					within a 16-bit signed offset of address 0. See <emphasis><xref linkend="SDATA0-AND-SBSS0-E500"></emphasis>
					for more details.</para>


					<informaltable frame="none">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.PPC.EMB.sdata0</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_PROGBITS</entry>
								</row>

								<row>
									<entry>sh_flags</entry>
									<entry>SHF_ALLOC &plus; SHF_WRITE</entry>
								</row>
								<row>
									<entry>sh_link</entry>
									<entry>SHF_UNDEF</entry>
								</row>

								<row>
									<entry>sh_addralign</entry>
									<entry>Maximum alignment required by any data item in .PPC.EMB.sdata0</entry>
								</row>

								<row>
									<entry>sh_info</entry>
									<entry>0</entry>
								</row>

								<row>
									<entry>sh_entsize</entry>
									<entry>0</entry>
								</row>

							</tbody>
						</tgroup>
					</informaltable>

				</listitem>
			</varlistentry>
			<varlistentry>
				<term><emphasis role="bold">.PPC.EMB.sbss0</emphasis></term>
				<listitem>

					<para> This section is intended to hold small data that contribute to the
					program memory image, whose addresses are all within a 16-bit signed offset of
					address 0, and whose initial values are 0.  See
					<emphasis><xref linkend="SDATA0-AND-SBSS0-E500"></emphasis> for further
					details.</para>

					<informaltable frame="none">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.PPC.EMB.sbss0</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_NOBITS</entry>
								</row>

								<row>
									<entry>sh_flags</entry>
									<entry>SHF_ALLOC &plus; SHF_WRITE</entry>
								</row>
								<row>
									<entry>sh_link</entry>
									<entry>SHF_UNDEF</entry>
								</row>

								<row>
									<entry>sh_addralign</entry>
									<entry>Maximum alignment required by any data item in .PPC.EMB.sbss0.</entry>
								</row>

								<row>
									<entry>sh_info</entry>
									<entry>0</entry>
								</row>

								<row>
									<entry>sh_entsize</entry>
									<entry>0</entry>
								</row>

							</tbody>
						</tgroup>
					</informaltable>

				</listitem>
			</varlistentry>
			<varlistentry>
				<term><emphasis role="bold">.PPC.EMB.seginfo</emphasis></term>
				<listitem>

					<para> The special section .PPC.EMB.seginfo provides a means of naming
					and providing additional information about ELF segments (which are described by
					ELF program header table entries). A file shall contain at most one section
					named .PPC.EMB.seginfo. See <emphasis><xref linkend="ROM-COPY-SEGMENT-INFORMATION-SECTION"></emphasis> for more details.</para>

					<informaltable frame="none">
						<tgroup cols='2' colsep='0' rowsep='0'>
							<colspec colwidth='60' colname='c1' align="left">
							<colspec colwidth='250' colname='c2' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Name</entry>
									<entry>Value</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>sh_name</entry>
									<entry>.PPC.EMB.seginfo</entry>
								</row>
								<row>
									<entry>sh_type</entry>
									<entry>SHT_PROGBITS</entry>
								</row>

								<row>
									<entry>sh_flags</entry>
									<entry>0</entry>
								</row>
								<row>
									<entry>sh_link</entry>
									<entry>SHF_UNDEF</entry>
								</row>

								<row>
									<entry></entry>
									<entry>   or</entry>
								</row>

								<row>
									<entry></entry>
									<entry>The section header table index of a section of type SHT_STRTAB whose string table contains the null terminated names to which entries in .PPC.EMB.seginfo refer.</entry>
								</row>

								<row>
									<entry>sh_addr</entry>
									<entry>0</entry>
								</row>

								<row>
									<entry>sh_addralign</entry>
									<entry>0</entry>
								</row>

								<row>
									<entry>sh_info</entry>
									<entry>0</entry>
								</row>

								<row>
									<entry>sh_entsize</entry>
									<entry>12</entry>
								</row>

							</tbody>
						</tgroup>
					</informaltable>

				</listitem>
			</varlistentry>
		</variablelist>
	</sect1>
	<sect1 id="SYMBOL-TABLE">
		<title>Symbol Table</title>
		<sect2 id="SYMBOL-VALUES"><title>Symbol Values</title>
			<para>An executable file that contains a symbol reference that is to be resolved dynamically by
			an associated shared object will have a symbol table entry for that symbol.  This entry will
			identify the symbol as undefined by setting the <emphasis role="bold">st_shndx</emphasis> member
			to <emphasis role="bold">SHN_UNDEF</emphasis>.</para>

			<para>An executable file that needs to compare the value of two symbol references will have a
			symbol table entry for that symbol where the <emphasis role="bold">st_value</emphasis> member is
			nonzero.</para>

			<para>If the <emphasis role="bold">st_value</emphasis> of an undefined symbol is nonzero, the
			loader must resolve every reference to the named symbol to the same value.  This insures that
			all pointers to the symbol will be identical.  If <emphasis role="bold">st_value</emphasis> is
			zero, the loader may resolve these symbols to different values, for example, to point directly
			to the symbol in some cases or into the GOT in other cases.  If no PLT entry is allocated for
			the symbol, then <emphasis role="bold">st_value</emphasis> is zero.</para>

			<para CONDITION="ATR-SECURE-PLT">Under the Secure-PLT ABI, if a PLT entry is allocated for a
			symbol reference in the executable file the value of this  <emphasis
			role="bold">st_value</emphasis> member is the address of an executable PLT call code stub.  This
			executable stub is used for branching to the virtual address held by the nonexecutable PLT
			entry for the symbol.  The content of the PLT entry defaults to the address of a PLT symbol
			resolver stub, which will direct the dynamic linker to resolve the reference to the symbol.
			Following resolution the PLT entry holds the absolute virtual address of the symbol.</para>

			<para CONDITION="ATR-BSS-PLT">Under the BSS-PLT ABI this <emphasis
			role="bold">st_value</emphasis> member holds the R_PPC_REL32 relocated address into the <emphasis
			role="bold">.plt</emphasis> section for the PLT entry used to resolve the undefined symbol.
			This PLT entry contains executable code used to dynamically resolve the address of the target
			symbol.  The number of instructions in this code stub varies on the distance to the
			target.</para>

			<para>Referencing GOT nonlocal statics is shown in <xref
			linkend="SMALL-MODEL-POS-IND-LOAD-STORE"> and <xref linkend="LARGE-MODEL-POS-IND-LOAD-STORE">.
			Taking the address of nonstatic function pointers is indicated by
			<varname>&lt;symbol&gt;&commat;plt</varname>. <xref linkend="SMALL-MODEL-PIC-CALL"> and <xref
			linkend="LARGE-MODEL-PIC-CALL"> demonstrate how to perform this action.</para>
		</sect2>
	</sect1>
	<sect1 id="SMALL-DATA-AREA" CONDITION="!ATR-EABI">
		<title>Small Data Area</title>

		<para>The <emphasis>small data area</emphasis> resides within the <emphasis>Data segment</emphasis>. It is composed of the 
		.sdata and .sbss sections which contain initialized and uninitialized data items, respectively. The data items
		in these sections are addressed by 16-bit signed offsets with respect to the base of the small data
		area.</para>

		<para>The use of small data areas for data items typically results in smaller programs and faster program execution.</para>

		<para>The small data area is adjacent to the initialized and uninitialized data in the Data segment of both executables and shared objects.</para>

		<para CONDITION="ATR-BSS-PLT">The typical order of sections in the Data segment (some possibly empty) under the BSS-PLT ABI is shown in <emphasis><xref linkend="BSS-PLT-SECTION-ORDERING"></emphasis>.
		<figure id="BSS-PLT-SECTION-ORDERING">
			<title>Section Ordering Under the BSS-PLT</title>
			<screen>
.data
.got
.sdata
.sbss
.plt
.bss</screen>
                	</figure></para>

		<para CONDITION="ATR-SECURE-PLT">Under the Secure-PLT ABI, for security reasons, the .got and .plt may be
		marked read-only after relocation, which requires placing the .got and .plt with other sections that are
		similarly made read-only after relocation, before sections that remain read-write as shown in
		<emphasis><xref linkend="SECURE-PLT-SECTION-ORDERING"></emphasis>.  If an implementation does not mark the .got and .plt sections as read-only after relocation it may still reorder the sections as indicated or it may use the section layout as described in <emphasis><xref linkend="BSS-PLT-SECTION-ORDERING"></emphasis>.  See <emphasis><xref linkend="SECURE-PLT"></emphasis> for information on the Secure-PLT ABI.

		<figure id="SECURE-PLT-SECTION-ORDERING">
			<title>Section Ordering Under the Secure-PLT</title>
                        <screen>
.got
.plt
.data
.sdata
.sbss
.bss</screen>
		</figure></para>

		<para>The size of the small data area is limited. A data item is placed in the small data area by
		a compiler that supports small data relative addressing based on its size. All data items up to a
		certain specified size (with 8 bytes being the typical default size) are placed into the small data
		area.</para>

		<para>The link editor fails to build the executable file or shared object file if the
		default or specified size for the placement of items into the small data area results in the small data
		area being too large to be addressed with 16-bit relative offsets. In such a situation, recompilation
		with a smaller value for the size criterion must be done.</para>

		<sect2 id="SMALL-DATA-AREA-FOR-EXECUTABLES">
			<title>Use of the Small Data Area in Executables</title>

			<para>In the case of executable files, the small data area may contain up to 64 KB of data
			items with local or global scope.  The link editor defines the symbol
			<varname>_SDA_BASE_</varname> (small data area base) to be an address relative to which all data
			in the .sdata and .sbss sections may be addressed with 16-bit signed offsets. In case there
			is not a .sdata or a .sbss section, the symbol <varname>_SDA_BASE_</varname> is defined to be
			0.</para>

			<para>For a data item in the .sdata or .sbss sections, a compiler may generate short-form one
			instruction references. In an executable file, such a reference is relative to the address of
			<varname>_SDA_BASE_</varname> symbol, which is held in the small data area pointer register,
			r13.</para>

			<para>At process initialization time, r13 is loaded with the
			value of the symbol <varname>_SDA_BASE_</varname>.  General-purpose register r13 retains this value subsequently, i.e., its
			contents remain intact. </para>

		</sect2>
		<sect2 id="SMALL-DATA-AREA-FOR-SHARED-OBJECTS" CONDITION="ATR-BSS-PLT">
			<title>Use of the Small Data Area in Shared Objects</title>

			<para CONDITION="ATR-SECURE-PLT">In a shared object under the Secure-PLT ABI, addressing .sdata
			and .sbss using short (16-bit) offsets is not supported and therefore using the small data area
			in shared objects is not supported, which is a change from the SYSV ABI.</para>

			<para>Because the small data area follows the <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis> in a shared object, the data in
			the small data area can be addressed relative to the GOT pointer.  For each shared object, the
			symbol <varname>_SDA_BASE_</varname> shall have the same value possessed by the symbol
			<varname>_GLOBAL_OFFSET_TABLE_</varname>.</para>

			<para>Since the small data area pointer register, r13, holds the value of the executable file's
			<varname>_SDA_BASE_</varname> symbol, a shared object may not modify r13 and should not attempt to use
			it for referencing the shared object's small data area.</para>

			<para>The <varname>_GLOBAL_OFFSET_TABLE_</varname> and <varname>_SDA_BASE_</varname> symbols are
			relative to each shared object and therefore the small data area of a shared object may only
			contain data items having local (i.e., non global) scope.</para>

			<para>When <varname>_GLOBAL_OFFSET_TABLE_</varname> relative addressing is used in a shared
			object to access the small data area, the size of the small data area can be 32 KB at the
			maximum, although it can be less if it happens that the <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis> is large.</para>
		
			<para>A compiler may generate short-form one instruction references relative to a register
			that contains the address of the shared object's <varname>_SDA_BASE_</varname> symbol.</para>

		</sect2>

<!--		<para>The small data segment of a shared object may only contain data items having local (i.e.
		nonglobal) scope.</para> -->

	</sect1>
	<sect1 CONDITION="ATR-EABI" id="SMALL-DATA-AREA-E500">

		<title>EABI Small Data Areas</title>

		<para>Three distinct small data areas, each possibly containing both initialized and zero-initialized data, are supported by the Embedded
		ABI, and are summarized in the following table.</para>


		<table id="EABI-SMALL-DATA-AREAS-SUMMARY" frame="none"><title>EABI Small Data Areas Summary</title>
			<tgroup cols='4' colsep='0' rowsep='0'>
				<colspec colwidth='100' colname='c1' align="left">
				<colspec colwidth='80' colname='c2' align="left">
				<colspec colwidth='80' colname='c3' align="left">
				<colspec colwidth='100' colname='c4' align="left">
				<thead>
					<row>
						<entry namest="c1" rowsep='1'>Section Names</entry>
						<entry namest="c2" rowsep='1'>Register or Value</entry>
						<entry namest="c3" rowsep='1'>Symbol</entry>
						<entry namest="c4" rowsep='1'>Shared Object Addressability?</entry>
					</row>
				</thead>
				<tbody>

							<row>
								<entry namest="c1">.sdata</entry>
								<entry namest="c2">r13</entry>
								<entry namest="c3"><varname>_SDA_BASE_</varname></entry>
								<entry namest="c4">local data only</entry>
							</row>
							<row>
								<entry namest="c1" nameend="c4" rowsep='1'>.sbss</entry>
							</row>

							<row>
								<entry namest="c1">.PPC.EMB.sdata2</entry>
								<entry namest="c2">r2</entry>
								<entry namest="c3"><varname>_SDA2_BASE_</varname></entry>
								<entry namest="c4">no</entry>
							</row>

							<row>
								<entry namest="c1" nameend="c4" rowsep='1'>.PPC.EMB.sbss2</entry>
							</row>
							<row>
								<entry namest="c1">.PPC.EMB.sdata0</entry>
								<entry namest="c2">0</entry>
								<entry namest="c3">n/a</entry>
								<entry namest="c4">no</entry>
							</row>

							<row>
								<entry namest="c1" nameend="c4" rowsep='1'>.PPC.EMB.sbss0</entry>
							</row>
				</tbody>
			</tgroup>
		</table>

		<para>In both shared objects and executables, the small data areas straddle the boundary between initialized and
		uninitialized data in the Data segment. The usual order of sections in the Data segment, some of which may be
		empty, is shown in <xref linkend="EABI-SECTION-ORDERING">.</para>

		<figure id="EABI-SECTION-ORDERING"><title>Section Ordering In the EABI</title>
			<screen>
.rodata
.PPC.EMB.sdata2
.PPC.EMB.sbss2
.data
.got
.sdata
.sbss
.plt
.bss</screen></figure>



		<para>All three small data areas can contain at most 64 KB of data items. All areas may hold both local
		and global data items in executables. In shared objects, .sdata/.sbss may only hold local data
		items, and the other two areas are not permitted. These areas are not permitted to hold values that
		might be changed outside of the program (that is, volatile variables). </para>

		<para>Compilers may generate short-form, one-instruction references with 16-bit offsets for all data items that are in these six
		sections. Placing more data items in small data areas usually results in smaller and faster program execution.</para>

		<para>These areas together provide up to 192 KB of data items that can be addressed in a single
		instruction: two 64-KB regions that can be placed anywhere in the address space but typically in
		standard locations (see <emphasis><xref linkend="SDATA-AND-SBSS-E500"></emphasis>), and one 64 KB region straddling address 0 (32 KB at
		addresses 0xFFFF_8000 through 0xFFFF_FFFF, and 32 KB at addresses 0x0000_0000 through
		0x0000_7FFF).</para>

		<para>Because the sizes of these areas are limited, compilers that support small data area relative
		addressing typically determine whether or not an eligible data item is placed in the small data area
		based on its size. Under this scheme, all data items less than or equal to a specified size (the default
		is usually 8 bytes) are placed in the small data area. Initialized data items are placed in one of the
		.data sections, uninitialized data items in one of the .sbss sections. If the default size results in
		a small data area that is too large to be addressed with 16-bit relative offsets, the link editor fails
		to build the executable file or shared object file, and some of the code that makes up the file must be recompiled
		with a smaller value for the size criterion. </para>

		<para>This ABI does not preclude a compiler from using profiling information or some form of heuristics, rather than purely
		data item size, to make more informed decisions about which data items should be placed in these regions.</para>

		<sect2 id="SDATA-AND-SBSS-E500">

			<title>Small Data Area (.sdata and .sbss)</title>

			<para>The small data area is part of the data segment of an executable program. It contains data items within the .sdata and
			.sbss sections, which can be addressed with 16-bit signed offsets from the base of the small data area.</para>

			<para>Only data items with local (nonglobal) scope may appear in the small data area of a
			shared object. In a shared object the small data area follows the <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis>, so data
			in the small data area can be addressed relative to the GOT pointer. However, in this case, the
			small data area is limited in size to no more than 32 KB, and less if the global offset
			table is large.</para>

			<para>For executable files, up to 64 KB of data items with local or global scope can be
			placed into the small data area. In an executable file, the symbol <varname>_SDA_BASE_</varname>
			(small data area base) is defined by the link editor to be an address relative to which all data
			in the .sdata and .sbss sections can be addressed with 16-bit signed offsets or, if there is
			neither a .sdata nor a .sbss section, the value 0. In a shared object,
			<varname>_SDA_BASE_</varname> is defined to have the same value as
			<varname>_GLOBAL_OFFSET_TABLE_</varname>. The value of <varname>_SDA_BASE_</varname> in an
			executable is normally loaded into r13 at process initialization time, and r13 thereafter
			remains unchanged. In particular, shared objects shall not change the value in r13.</para>

			<para>In executables, references to data items in the .sdata or .sbss sections are relative to r13; in shared objects,
			they are relative to a register that contains the address of the <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis>.</para>

		</sect2>

		<sect2 id="SDATA2-AND-SBSS2-E500">

			<title> Small Data Area 2 (.PPC.EMB.sdata2 and .PPC.EMB.sbss2)</title>

			<para>Analogous to the symbol <varname>_SDA_BASE_</varname> described in the SVR4 ABI, the symbol <varname>_SDA2_BASE_</varname> shall
			have a value such that the address of any byte in the ELF sections .PPC.EMB.sdata2 and
			.PPC.EMB.sbss2 is within a signed 16-bit offset of <varname>_SDA2_BASE_</varname>'s value (see <emphasis><xref linkend="SPECIAL-SECTIONS"></emphasis>).</para>

			<para>The sum of the sizes of sections .PPC.EMB.sdata2 and .PPC.EMB.sbss2 in an ELF file
			shall not exceed 64 KB.  A file shall contain at most one section named .PPC.EMB.sdata2 and
			at most one section named .PPC.EMB.sbss2. In an executable file, data items with local or global
			scope can be placed into .PPC.EMB.sdata2 or .PPC.EMB.sbss2.  Sections .PPC.EMB.sdata2 and
			.PPC.EMB.sbss2 shall not appear in a shared object.</para>

			<para>If an executable file contains a .PPC.EMB.sdata2 section or a .PPC.EMB.sbss2 section, then
			a link editor shall set the symbol <varname>_SDA2_BASE_</varname> to be an address such that the address of any byte in
			.PPC.EMB.sdata2 or .PPC.EMB.sbss2 is within a 16-bit signed offset of <varname>_SDA2_BASE_</varname>. If an
			executable file does not contain .PPC.EMB.sdata2 or .PPC.EMB.sbss2, then a link editor shall set
			<varname>_SDA2_BASE_</varname> to 0.</para>

			<para>If a link editor creates a .PPC.EMB.sdata2 section that combines a .PPC.EMB.sdata2
			section whose <varname>sh_flags</varname> is SHF_ALLOC with a .PPC.EMB.sdata2 section whose <varname>sh_flags</varname> is SHF_ALLOC +
			SHF_WRITE, then the resulting .PPC.EMB.sdata2 section's <varname>sh_flags</varname> value shall be SHF_ALLOC +
			SHF_WRITE.</para>


		</sect2>

		<sect2 id="SDATA0-AND-SBSS0-E500">

			<title> Small Data Area 0 (.PPC.EMB.sdata0 and .PPC.EMB.sbss0)</title>

			<para>No symbol is needed for a base pointer for these sections (.PPC.EMB.sdata0 and .PPC.EMB.sbss0), because all addressing can
			be relative to address 0 (an address register encoding of r0 means the value 0 in Power Architecture load and store
			instructions).</para>

			<para>The sum of the sizes of sections .PPC.EMB.sdata0 and .PPC.EMB.sbss0 in an ELF file shall not exceed 64 KB. A
			file shall contain at most one section named .PPC.EMB.sdata0 and at most one section named .PPC.EMB.sbss0. Data items with
			local or global scope can be placed into .PPC.EMB.sdata0 or .PPC.EMB.sbss0.  Sections .PPC.EMB.sdata0 and .PPC.EMB.sbss0 shall
			not appear in a shared object.</para>

		</sect2>
	</sect1> 
	<sect1 CONDITION="ATR-SPE" id="DWARF-ADDITIONS">

		<title>DWARF Additions</title>

		<para>In order to provide debuggers with the ability to identify where __ev64_opaque__ variables are located, several new DWARF
		operations have been added, as shown in the following table.</para>


		<table id="DWARF-ADDITIONS-FOR-OPAQUE" frame="none"><title>DWARF Additions For <varname>__ev64_opaque__</varname> Support</title>
			<tgroup cols='3' colsep='0' rowsep='0'>
				<colspec colwidth='130' colname='c1' align="left">
				<colspec colwidth='60' colname='c2' align="left">
				<colspec colwidth='200' colname='c3' align="left">
				<thead>
					<row>
						<entry namest="c1" rowsep='1'>Operation</entry>
						<entry namest="c2" rowsep='1'>Value</entry>
						<entry namest="c3" rowsep='1'>Description</entry>
					</row>
				</thead>
				<tbody>
							<row>
								<entry namest="c1">DW_OP_ev64_opaque_reg<emphasis role="italicbold">n</emphasis></entry>
								<entry namest="c2">0xe0-0xff</entry>
								<entry namest="c3" morerows="2">The data object addressed is in the upper and lower halves of register <emphasis role="italicbold">n</emphasis>, where <emphasis role="italicbold">n</emphasis> is 0 through 31.</entry>
							</row>
				</tbody>
			</tgroup>
		</table>

<!--
		<screen>

                 DWARF Additions for __ev64_opaque__ support

---------------------------------------------------------------------------------
      Operation                Value                            Description     
---------------------------------------------------------------------------------
 DW_OP_ev64_opaque_reg0
                                                      The object addressed is in 
          ...                 0xe0-0xff               the upper and lower halves 
                                                      of register n.
 DW_OP_ev64_opaque_reg31
---------------------------------------------------------------------------------
		</screen> -->
<!--                              ? (Only 32 entries      The object addressed is in 
 DW_OP_ev64_opaque_regx       are reserved, so        the upper and lower halves 
                              we're  out of           of the register whose name
                              entries...)             is encoded in the unsigned
                                                      LEB128 literal operand.
---------------------------------------------------------------------------------
-->

	</sect1>
	<sect1 id="APU-INFORMATION-SECTION">

		<!--<title>APU<phrase CONDITION="ATR-VLE"> & VLE</phrase> Information Section</title> -->
		<title>APU Information Section</title> 

		<para>This section allows disassemblers and debuggers to properly interpret the instructions within the
		binary, and could also be used by operating systems to provide emulation or error checking of the APU
		revisions.  The format matches that of typical ELF note sections, as shown in <emphasis><xref linkend="ELF-NOTE-SECTION-FORMAT"></emphasis>.  </para>

		<table id="ELF-NOTE-SECTION-FORMAT" frame="all"><title>Typical Elf Note Section Format</title>
			<tgroup cols='1' colsep='1' rowsep='1'>
				<colspec colwidth='280' colname='c2' align="left">
				<tbody>
					<row>
						<entry>length of name (in bytes)</entry>
					</row>
					
					<row>
						<entry>length of data (in bytes)</entry>
					</row>
					
					<row>
						<entry>type</entry>
					</row>
					
					<row>
						<entry>name (null-terminated, padded to 4-byte alignment)</entry>
					</row>
					
					<row>
						<entry>data</entry>
					</row>

				</tbody>
			</tgroup>
		</table>

		<para>For the .PPC.EMB.apuinfo section, the name shall be <emphasis>APUinfo\0</emphasis>, the type shall be 2, and the data
		shall contain a series of words containing APU information, one per word as in <emphasis><xref linkend="OBJECT-FILE-AO"></emphasis> and <emphasis><xref linkend="OBJECT-FILE-BO"></emphasis>. The APU information contains
		two unsigned halfwords: the upper half contains the unique APU identifier, and the lower half contains
		the revision of that APU.</para>


		<table id="OBJECT-FILE-AO" frame="all"><title>Object File a.o</title>
			<tgroup cols='3' colsep='1' rowsep='0'>
				<colspec colwidth='40' colname='c1' align="center">
				<colspec colwidth='70' colname='c2' align="center">
				<colspec colwidth='200' colname='c3' align="left">
				<thead>
					<row rowsep=1>
						<entry>Offset</entry>
						<entry>Value</entry>
						<entry>Comment</entry>
					</row>
				</thead>
				<tbody>
					<row rowsep=1>
						<entry>0</entry>
						<entry>0x00000008  </entry>
						<entry>8 bytes in "APUinfo\0"</entry>
					</row>
					
					<row rowsep=1>
						<entry>4</entry>
						<entry>0x0000000C  </entry>
						<entry>12 bytes (3 words) of APU information</entry>
					</row>
					
					<row rowsep=1>
						<entry>8</entry>
						<entry>0x00000002  </entry>
						<entry>NOTE type 2</entry>
					</row>
					
					<row rowsep=1>
						<entry>12</entry>
						<entry>"APUinfo\0" </entry>
						<entry>string identifying this as APU information </entry>
					</row>
					
					<row>
						<entry>20</entry>
						<entry>0x00010001  </entry>
						<entry>APU #1, revision 1</entry>
					</row>
					
					<row>
						<entry>24</entry>
						<entry>0x00020003  </entry>
						<entry>APU #2, revision 3</entry>
					</row>
					
					<row>
						<entry>28</entry>
						<entry>0x00040001  </entry>
						<entry>APU #4, revision 1</entry>
					</row>
				</tbody>
			</tgroup>
		</table>


		<table id="OBJECT-FILE-BO" frame="all"><title>Object File b.o</title>
			<tgroup cols='3' colsep='1' rowsep='0'>
				<colspec colwidth='40' colname='c1' align="center">
				<colspec colwidth='70' colname='c2' align="center">
				<colspec colwidth='200' colname='c3' align="left">
				<thead>
					<row rowsep=1>
						<entry>Offset</entry>
						<entry>Value</entry>
						<entry>Comment</entry>
					</row>
				</thead>
				<tbody>
				
					<row rowsep=1>
						<entry>0</entry>
						<entry>0x00000008  </entry>
						<entry>8 bytes in "APUinfo\0"</entry>
					</row>
					<row rowsep=1>
						<entry>4</entry>
						<entry>0x00000008  </entry>
						<entry>8 bytes (2 words) of APU information</entry>
					</row>
					<row rowsep=1>
						<entry>8</entry>
						<entry>0x00000002  </entry>
						<entry>NOTE type 2</entry>
					</row>
					<row rowsep=1>
						<entry>12</entry>
						<entry>"APUinfo\0" </entry>
						<entry>string identifying this as APU information </entry>
					</row>
					<row>
						<entry>20</entry>
						<entry>0x00010002  </entry>
						<entry>APU #1, revision 2</entry>
					</row>
					<row>
						<entry>24</entry>
						<entry>0x00040001  </entry>
						<entry>APU #4, revision 1</entry>
					</row>

				</tbody>
			</tgroup>
		</table>

		<para>Linkers shall merge all .PPC.EMB.apuinfo sections in the individual relocatable files into one, with
		merging of per-APU information as demonstrated in <emphasis><xref linkend="MERGED-SECTION"></emphasis>.</para>

		<table id="MERGED-SECTION" frame="all"><title>Merged Object File b.o</title>
			<tgroup cols='3' colsep='1' rowsep='0'>
				<colspec colwidth='40' colname='c1' align="center">
				<colspec colwidth='70' colname='c2' align="center">
				<colspec colwidth='200' colname='c3' align="left">
				<thead>
					<row rowsep=1>
						<entry>Offset</entry>
						<entry>Value</entry>
						<entry>Comment</entry>
					</row>
				</thead>
				<tbody>
					<row rowsep=1>
						<entry>0</entry>
						<entry>0x00000008  </entry>
						<entry>8 bytes in "APUinfo\0"                     </entry>
					</row>
					
					<row rowsep=1>
						<entry>4</entry>
						<entry>0x0000000C  </entry>
						<entry>12 bytes (3 words) of APU information      </entry>
					</row>
					
					<row rowsep=1>
						<entry>8</entry>
						<entry>0x00000002  </entry>
						<entry>NOTE type 2                                </entry>
					</row>
					
					<row rowsep=1>
						<entry>12</entry>
						<entry>"APUinfo\0" </entry>
						<entry>string identifying this as APU information </entry>
					</row>
					
					<row>
						<entry>20</entry>
						<entry>0x00010002  </entry>
						<entry>APU #1, revision 2                         </entry>
					</row>
					
					<row>
						<entry>24</entry>
						<entry>0x00020003  </entry>
						<entry>APU #2, revision 3                         </entry>
					</row>
					
					<row>
						<entry>28</entry>
						<entry>0x00040001  </entry>
						<entry>APU #4, revision 1                         </entry>
					</row>

				</tbody>
			</tgroup>
		</table>

		<note><title>Note</title> <para>Note: It is assumed that a later revision of any APU is compatible
		with an earlier one, but the converse is not true. Thus, the resultant .PPC.EMB.apuinfo section requires APU #1
		revision 2 or greater to work, and will not work on APU #1 revision 1. If an APU revision breaks
		backwards compatibility, it must obtain a new unique APU identifier.</para></note>

		<table id="APU-IDENTIFIERS" frame="all"><title>APU Identifiers</title>
			<tgroup cols='2' colsep='1' rowsep='0'>
				<colspec colwidth='120' colname='c1' align="center">
				<colspec colwidth='280' colname='c2' align="left">
				<thead>
					<row rowsep='1'>
						<entry>APU Identifier (16 Bits)</entry>
						<entry>APU/Extension</entry>
					</row>
				</thead>


				<tbody>
					<row>
						<entry>0x003f</entry>
						<entry>AltiVec</entry>
					</row>
					
					<row>
						<entry>0x0040</entry>
						<entry>ISEL</entry>
					</row>
					
					<row>
						<entry>0x0041</entry>
						<entry>PMR (Performance Monitor)</entry>
					</row>
					
					<row>
						<entry>0x0042</entry>
						<entry>RFMCI (Machine-check)</entry>
					</row>
					
					<row>
						<entry>0x0043</entry>
						<entry>CACHE_LOCK (Cache-locking)</entry>
					</row>
					
					<row>
						<entry>0x0100</entry>
						<entry>e500 SPE</entry>
					</row>
					
					<row>
						<entry>0x0101</entry>
						<entry>e500 SPFP/EFS</entry>
					</row>
					
					<row>
						<entry>0x0102</entry>
						<entry>e500 BRLOCK/BR_LOCK (Branch-locking/BTB locking)</entry>
					</row>
					
					<row>
						<entry>0x0104</entry>
						<entry>VLE</entry>
					</row>
					
					<row>
						<entry>0x0000..0x003E</entry>
						<entry>Reserved for legacy use</entry>
					</row>
					
					<row>
						<entry>0x0044..0x00FF</entry>
						<entry>Reserved</entry>
					</row>



				</tbody>
			</tgroup>
		</table>



		<para>A link editor may optionally warn when different relocatable objects require different revisions of an APU, because
		moving the revision up may make the executable no longer work on processors with the older revision of
		the APU. In this example, the link editor could emit a warning like "Warning:bumping APU #1 revision number
		to 2, required by b.o."</para>
	</sect1>
	<sect1 CONDITION="ATR-VLE" id="VLE-IDENTIFICATION">
		<title>VLE Identification</title>

		<para>The executable and linking format (ELF) allows processor-specific section header and program header flag attributes to be
		defined. The following section header and program header flag attribute definitions are used to mark ELF sections containing VLE
		instruction encodings.</para>

		<screen>
#define SHF_PPC_VLE 0x10000000             /* section header flag */
#define PF_PPC_VLE 0x10000000              /* program header flag */</screen>

		<para>The SHF_PPC_VLE flag marks ELF sections containing VLE instructions. Similarly, the PF_PPC_VLE flag is used by ELF program
		headers to mark program segments containing VLE instructions. If either the SHF_PPC_VLE flag or the PF_PPC_VLE flag is set, then
		instructions in those marked sections are interpreted as VLE instructions; Book E instructions reside in sections that do not have
		these flags set.</para>

		<para>ELF sections setting the SHF_PPC_VLE flag that contain VLE instructions should also use the SHF_ALLOC and SHF_EXECINSTR bits as
		necessary. Setting the SHF_PPC_VLE bit does not automatically imply a section that is marked as allocate (SHF_ALLOC) or executable
		(SHF_EXECINSTR). The link editor keeps sections marked as VLE (SHF_PPC_VLE) in separate output sections that do not contain Book E
		instructions.</para>

		<para>Similarly, ELF program headers setting the PF_PPC_VLE flag should use the PF_X, PF_W, and PF_R flags to indicate executable,
		writable, or readable attributes. It is considered an error for a program header with PF_PPC_VLE set to contain sections that do not
		have SHF_PPC_VLE set.</para>

		<para>A program loader or debugger can then scan the section headers or program headers to detect VLE sections in case anything
		special is required for section processing or downloading.</para>

	</sect1>
	<sect1 CONDITION="ATR-EABI" id="ROM-COPY-SEGMENT-INFORMATION-SECTION">
		<title>ROM Copy Segment Information Section</title>

		<para>Often embedded applications copy the initial values for variables from ROM to RAM at the start of execution. To facilitate this,
		a link editor resolves references to the application variables at their RAM locations, but relocates the variable's initial values
		to their ROM locations. An ELF segment whose raw data (addressed by the program header entry's p_offset field) consists of initial
		values to be copied to the locations of application variables is a ROM copy segment. One purpose of .PPC.EMB.seginfo is to define that
		one segment is a ROM copy of, and thus has the initial values for, a second segment.</para>

		<para>The raw data for section .PPC.EMB.seginfo shall contain only 12-byte entries whose C structure is:</para>
		<screen>
typedef struct {
    Elf32_Half sg_indx;
    Elf32_Half sg_flags;
    Elf32_Word sg_name;
    Elf32_Word sg_info;
} Elf32_PPC_EMB_seginfo;</screen>
		<para>where the structure members are defined as follows:</para>

		<variablelist id="ELF32-PPC-EMB-SEGINFO">
			<varlistentry>
				<term><emphasis role="bold"><varname>sg_indx</varname></emphasis></term>
				<listitem>

					<para>The index number of a segment in the program header table. Program header
					table entries are considered to be numbered from 0 to <emphasis>n</emphasis> &minus; 1, where <emphasis>n</emphasis> is the
					number of table entries.</para>

				</listitem>
			</varlistentry>
			<varlistentry>
				<term><emphasis role="bold"><varname>sg_flags</varname></emphasis></term>
				<listitem>
					<para>A bit mask of flags. The only allowed flag shall be as shown in the following table.</para>


					<informaltable frame="none">
						<tgroup cols='3' colsep='0' rowsep='0'>
							<colspec colwidth='120' colname='c1' align="left">
							<colspec colwidth='40' colname='c2' align="left">
							<colspec colwidth='200' colname='c3' align="left">
							<thead>
								<row rowsep='1'>
									<entry>Flat Name</entry>
									<entry>Value</entry>
									<entry>Allowed Flag Meaning</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>PPC_EMB_SG_ROMCOPY</entry>
									<entry>0x0001</entry>

									<entry>Segment indexed by <varname>sg_indx</varname> is a ROM copy of
									the segment indexed by <varname>sg_info</varname>.</entry>

								</row>
							</tbody>
						</tgroup>
					</informaltable>


				</listitem>
			</varlistentry>
	
			<varlistentry>
				<term><emphasis role="bold"><varname>sg_name</varname></emphasis></term>
				<listitem>

					<para>The offset into the string table where the null terminated name for the
					segment indexed by <varname>sg_indx</varname>>
					is found. The section index of the string table to be used is in the 
					<varname>sh_link</varname> field of .PPC.EMB.seginfo's
					section header. If <varname>sh_link</varname>
					is SHN_UNDEF, then sg_name shall be 0 for all .PPC.EMB.seginfo entries. An
					<varname>sg_name</varname> value of 0 shall
					mean that the segment indexed by <varname>sg_indx</varname> has no name.</para>

				</listitem>
			</varlistentry>
			<varlistentry>
				<term><emphasis role="bold"><varname>sg_info</varname></emphasis></term>
				<listitem>

					<para>Contains information that depends on the value of <varname>sg_flags</varname>. If the flag PPC_EMB_SG_ROMCOPY is set in <varname>sg_flags</varname>, then <varname>sg_info</varname> shall be the index number of the segment for which the segment indexed by <varname>sg_indx</varname> is a ROM copy; otherwise, the value of <varname>sg_info</varname> shall be 0.</para>

				</listitem>
			</varlistentry>
		</variablelist>

		<para>If one segment is a ROM copy of a second segment (based on information in section .PPC.EMB.seginfo), then:</para>


		<itemizedlist>
			<listitem>
				<para>The first segment's p_type value shall be PT_LOAD.</para>
			</listitem>
			<listitem>

				<para>The second segment's p_type value shall be PT_NULL.</para>
			</listitem>
			<listitem>
				<para CONDITION="ATR-EABI-EXTENDED">Under EABI extended conformance none of the relocation entries that a dynamic linker might resolve shall refer to a location in the segment that is the ROM copy of another segment.</para>
			</listitem>
		</itemizedlist>

		<para>If the section exists, .PPC.EMB.seginfo shall contain at least one entry but need not contain an entry for every
		segment. Entries shall be in the same order as their corresponding segments in the ELF program header table (increasing values of
		sg_indx). Only one .PPC.EMB.seginfo entry shall be allowed per segment.</para>

		<para>A link editor may support creation of section .PPC.EMB.seginfo, and, if it supports creation, it may support only segment
		naming, only ROM copy segments, or both.</para>
	</sect1>
	<sect1 id="RELOCATION-TYPES"><title>Relocation Types</title>

			<para CONDITION="ATR-EABI-EXTENDED">Under the EABI support for dynamic linking, the GOT, and the
			PLT is considered EABI extended conformance.</para>

			<para>The relocation entries in a relocatable file are used by the link
			editor to transform the contents of said file into an executable file or
			shared object file.  The application and result of a relocation are
			similar for both.  Several relocatable files may be combined into one
			output file.  The link editor merges the content of the files, sets the
			value of all function symbols, and performs relocations.</para>

			<para>The 32-bit Power Architecture uses <varname>Elf32_Rela</varname> relocation entries exclusively.  A relocation entry may operate upon a halfword, word, or doubleword.  The <varname>r_offset</varname> member of the relocation entry designates the first byte of the address affected by the relocation.  The subfield of <varname>r_offset</varname> affected by a relocation is implicit in the definition of the applied relocation type.  The <varname>r_addend</varname> member of the relocation entry serves as the relocation addend which is described per relocation formula.</para>

			<para>A <emphasis>relocation type</emphasis> defines a set of
			instructions and calculations necessary to alter the subfield data of a
			particular relocation field.</para>

			<sect2 id="RELOCATION-FIELDS"><title>Relocation Fields</title>

			<para>The following <emphasis>relocation fields</emphasis>
			identify a subfield of an address affected by a relocation.</para>

			<para> Bit numbers appear at the bottom of the boxes.  Byte numbers
			appear in the top of the boxes; big-endian in the upper left corners and
			little-endian in the upper right corners.  The byte order specified in a
			relocatable file's ELF header applies to all the elements of a
			relocation entry, the relocation field definitions, and relocation type
			calculations.</para>
			
			<variablelist>
				<varlistentry>
					<term><emphasis role="bold">word32</emphasis></term>
					<listitem>
						<para>Specifies a 32-bit bit-field taking up 4 bytes maintaining 4-byte alignment unless otherwise indicated.</para>

						<para CONDITION="ATR-EABI">Under the EABI, this field shall have no-alignment restrictions.</para>

						<informaltable frame="all">
							<tgroup cols='8' colsep='0' rowsep='0'>
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c3' align="left">
							<colspec colwidth="50" colname='c4' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c5' align="left">
							<colspec colwidth="50" colname='c6' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c7' align="left">
							<colspec colwidth="50" colname='c8' align="right">
							<tbody>
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">3</entry>
									<entry namest="c3">1</entry>
									<entry namest="c4">2</entry>
									<entry namest="c5">2</entry>
									<entry namest="c6">1</entry>
									<entry namest="c7">3</entry>
									<entry namest="c8">0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c8" align="center" colsep='1'>word32</entry>
								</row>	
								<row rowsep='1'>
									<entry namest="c1">0</entry>
									<entry namest="c8">31</entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">word30</emphasis></term>
					<listitem>

						<para>Specifies a 30-bit bit-field taking up bits 0-29 of a word,
						maintaining 4-byte alignment unless otherwise indicated.</para>

						<informaltable frame="all">
							<tgroup cols='10' colsep='0' rowsep='0'>
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c3' align="left">
							<colspec colwidth="50" colname='c4' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c5' align="left">
							<colspec colwidth="50" colname='c6' align="right" colsep='1'>
				
							<colspec colwidth="30" colname='c7' align="left">
							<colspec colwidth="30" colname='c8' align="right" colsep='1'>
							<colspec colwidth="20" colname='c9' align="left">
							<colspec colwidth="20" colname='c10' align="right">
							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">3</entry>
									<entry namest="c3">1</entry>
									<entry namest="c4">2</entry>
									<entry namest="c5">2</entry>
									<entry namest="c6" colsep='1'>1</entry>
									<entry namest="c7">3</entry>
									<entry namest="c8" colsep='1'></entry>
									<entry namest="c10">0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c8" align="center" colsep='1'>word30</entry>
									<entry namest="c9" nameend="c10"></entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c7" align="left">0</entry>
									<entry namest="c8" colsep='1' align="right">29</entry>
									<entry namest="c9">30</entry>
									<entry namest="c10">31</entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">low24</emphasis></term>
					<listitem>

						<para>Specifies a 24-bit bit-field taking up bits 6-29 of a word,
						maintaining 4-byte alignment.  The other bits remain unchanged.  A
						branch instruction is an example of this field.</para> 
						
						<informaltable frame="all">
							<tgroup cols='12' colsep='0' rowsep='0'>
				
							<colspec colwidth="20" colname='c1' align="left">
							<colspec colwidth="20" colname='c2' align="right" colsep='1'>
							<colspec colwidth="30" colname='c3' align="left">
							<colspec colwidth="30" colname='c4' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c5' align="left">
							<colspec colwidth="50" colname='c6' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c7' align="left">
							<colspec colwidth="50" colname='c8' align="right" colsep='1'>
				
							<colspec colwidth="30" colname='c9' align="left">
							<colspec colwidth="30" colname='c10' align="right" colsep='1'>
							<colspec colwidth="20" colname='c11' align="left">
							<colspec colwidth="20" colname='c12' align="right">
							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2" colsep='1'></entry>
									<entry namest="c3"></entry>
									<entry namest="c4" colsep='1'>3</entry>
									<entry namest="c5">1</entry>
									<entry namest="c6" colsep='1'>2</entry>
									<entry namest="c7">2</entry>
									<entry namest="c8" colsep='1'>1</entry>
									<entry namest="c9">3</entry>
									<entry namest="c10" colsep='1'></entry>
									<entry namest="c11"></entry>
									<entry namest="c12">0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c3" nameend="c10" align="center" colsep='1'>low24</entry>
									<entry namest="c11" nameend="c12"></entry>
								</row>	
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">5</entry>
									<entry namest="c3" nameend="c9" align="left">6</entry>
									<entry namest="c10" colsep='1' align="right">29</entry>
									<entry namest="c11">30</entry>
									<entry namest="c12">31</entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>
				<!-- Unfortunately rendering is all screwed up if this is conditionalized.  It should be harmless to include. -->
				<!--<varlistentry CONDITION="ATR-VLE || ATR-SPE || ATR-EABI"> --> 
				<varlistentry>
					<term><emphasis role="bold">low21</emphasis></term>
					<listitem>
						<para>Specifies a 21-bit bit-field occupying the least significant bits of a word with 4-byte alignment.</para>
<!--						<para CONDITION="ATR-VLE">Under VLE, this field shall have 2-byte alignment.</para> -->

						<para CONDITION="ATR-EABI">Under the EABI, this field shall have no-alignment restrictions.</para>

						<informaltable frame="all">
							<tgroup cols='8' colsep='0' rowsep='0'>
				
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right" colsep='1'>
				
							<colspec colwidth="20" colname='c3' align="left" colsep='1'>
							<colspec colwidth="80" colname='c4' align="right">
				
							<colspec colwidth="50" colname='c5' align="left">
							<colspec colwidth="50" colname='c6' align="right" colsep='1'>
							
							<colspec colwidth="50" colname='c7' align="left">
							<colspec colwidth="50" colname='c8' align="right">
							<tbody>
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2" colsep='1'>3</entry>
									<entry namest="c3" colsep='1'>1</entry>
									<entry namest="c4" colsep='1'>2</entry>
									<entry namest="c5">2</entry>
									<entry namest="c6">1</entry>
									<entry namest="c7">3</entry>
									<entry namest="c8" colsep='1'>0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c3" colsep='1'></entry>
									<entry namest="c4" nameend="c8" align="center">low21</entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2">0</entry>
									<entry namest="c3" colsep='1' align="right">10</entry>
									<entry namest="c8" align="right">31</entry>
				
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">low14</emphasis></term>
					<listitem>

						<para>Specifies a 14-bit bit-field taking up bits 16-29 and possibly bit
						10 (branch prediction bit) of a word, maintaining 4-byte alignment.
						The other bits remain unchanged.  A conditional branch instruction is an
						example usage.</para>


						<informaltable frame="all">
							<tgroup cols='10' colsep='0' rowsep='0'>
				
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right" colsep='1'>
				
							<colspec colwidth="33" colname='c3' align="left">
							<colspec colwidth="33" colname='c4' align="left" colsep='1'>
							<colspec colwidth="33" colname='c5' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c6' align="left">
							<colspec colwidth="50" colname='c7' align="right" colsep='1'>
							
							<colspec colwidth="60" colname='c8' align="left">
							<colspec colwidth="20" colname='c9' align="left">
							<colspec colwidth="20" colname='c10' align="right" colsep='1'>
							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2" colsep='1'>3</entry>
									<entry namest="c3" colsep='1'>1</entry>
									<entry namest="c4" colsep='1'></entry>
									<entry namest="c5" colsep='1'>2</entry>
									<entry namest="c6">2</entry>
									<entry namest="c7">1</entry>
									<entry namest="c8" colsep='1'>3</entry>
									<entry namest="c9"></entry>
									<entry namest="c10" colsep='1'>0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c3" colsep='1'></entry>
									<entry namest="c4" colsep='1'></entry>
									<entry namest="c5" colsep='1'></entry>
									<entry namest="c6" nameend="c8" align="center" colsep='1'>low14</entry>
									<entry namest="c9" nameend="c10"></entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c3" colsep='1'>0</entry>
									<entry namest="c4" colsep='1'>10</entry>
									<entry namest="c5" colsep='1'>15</entry>
									<entry namest="c6" nameend="c7" align="left">16</entry>
									<entry namest="c8" align="right" colsep='1'>29</entry>
									<entry namest="c9">30</entry>
									<entry namest="c10">31</entry>
				
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>


				<varlistentry>
					<term><emphasis role="bold">half16</emphasis></term>
					<listitem>

						<para>Specifies a 16-bit bit-field taking up two bytes, maintaining
						2-byte alignment.  The immediate field of an Add Immediate instruction
						is an example of this field.</para>

						<para CONDITION="ATR-EABI">Under the EABI, this field shall have no-alignment restrictions.</para>

						<informaltable frame="all">
							<tgroup cols='4' colsep='0' rowsep='0'>
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c3' align="left">
							<colspec colwidth="50" colname='c4' align="right">
							<tbody>
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">1</entry>
									<entry namest="c3">1</entry>
									<entry namest="c4">0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c4" align="center">half16</entry>
								</row>	
								<row rowsep='1'>
									<entry namest="c1">0</entry>
									<entry namest="c4">15</entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>



			</variablelist>

			</sect2>
			<sect2 id="SPE-RELOCATION-FIELDS" CONDITION="ATR-SPE"><title>SPE Specific Relocation Fields</title>

				
				
				

			<variablelist>

				<varlistentry>
					<term><emphasis role="bold">mid5</emphasis></term>
					<listitem>
						<para>Specifies a 5-bit bit-field occupying the most significant bits of the least-significant halfword of a word with 4-byte alignment. This relocation field is used primarily for the SPE APU load/store instructions.  </para>

						<informaltable frame="all">
							<tgroup cols='9' colsep='0' rowsep='0'>
				
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right">
				
							<colspec colwidth="50" colname='c3' align="left">
							<colspec colwidth="50" colname='c4' align="right">
				
							<colspec colwidth="60" colname='c5' align="left">
							<colspec colwidth="20" colname='c6' align="right">
							<colspec colwidth="20" colname='c7' align="right">
							
							<colspec colwidth="50" colname='c8' align="left">
							<colspec colwidth="50" colname='c9' align="right">
							<tbody>
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2" colsep='1'>3</entry>
									<entry namest="c3" colsep='0'>1</entry>
									<entry namest="c4" colsep='1'>2</entry>
									<entry namest="c5" colsep='0'>2</entry>
									<entry namest="c6" colsep='1'></entry>
									<entry namest="c7" colsep='1'>1</entry>
									<entry namest="c8" colsep='0'>3</entry>
									<entry namest="c9">0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c4" colsep='1'></entry>
									<entry namest="c5" nameend="c6" align="center" colsep='1'>mid5</entry>
									<entry namest="c7" nameend="c8"></entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c3">0</entry>
									<entry namest="c4" colsep='1' align="right">15</entry>
									<entry namest="c5" align="left">16</entry>
									<entry namest="c6" align="right" colsep='1'>20</entry>
									<entry namest="c7" align="left" colsep='0'>21</entry>
									<entry namest="c9" align="right">31</entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>
				<varlistentry>
					<term><emphasis role="bold">mid10</emphasis></term>
					<listitem>
						<para>Specifies a 10-bit bit-field occupying bits 11 through 20 of a word with 4-byte alignment. This relocation field is used primarily for the SPE APU load/store instructions.</para>

						<informaltable frame="all">
							<tgroup cols='8' colsep='0' rowsep='0'>
				
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right">
				
							<colspec colwidth="20" colname='c3' align="left">
							<colspec colwidth="80" colname='c4' align="right">
				
							<colspec colwidth="80" colname='c5' align="left">
							<colspec colwidth="20" colname='c6' align="right">
							
							<colspec colwidth="50" colname='c7' align="left">
							<colspec colwidth="50" colname='c8' align="right">
							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2" colsep='1'>3</entry>
									<entry namest="c3" colsep='1'>1</entry>
									<entry namest="c4" colsep='1'>2</entry>
									<entry namest="c5" colsep='2'>2</entry>
									<entry namest="c6" colsep='1'>1</entry>
									<entry namest="c7">3</entry>
									<entry namest="c8" colsep='1'>0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c3" colsep='1'></entry>
									<entry namest="c4" nameend="c5" align="center" colsep='1'>mid10</entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2">0</entry>
									<entry namest="c3" colsep='1' align="right">10</entry>
									<entry namest="c4" align="left">11</entry>
									<entry namest="c5" align="right" colsep='1'>20</entry>
									<entry namest="c6" align="left">21</entry>
									<entry namest="c8" align="right">31</entry>
				
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>

				</varlistentry>
			</variablelist>
			</sect2>

			<sect2 id="VLE-RELOCATION-FIELDS" CONDITION="ATR-VLE"><title>VLE Specific Relocation Fields</title>

			<variablelist>

				<varlistentry>
					<term><emphasis role="bold">split20</emphasis></term>
					<listitem>

						<para>20-bit bit-field with the 4 MSBs occupying bits 17 to 20, the next
						5 bits occupying bits 11 to 15, and the remaining 11 bits occupying bits
						21 to 31.</para>

						<para>In addition, bits 0 to 5 in the destination word are encoded with
						the binary value 011100, bit 16 is encoded with the binary value
						0.</para>

						<note><title>note</title><para>Note: This relocation field specifies the opcode for the VLE
						e_li instruction, allowing the link editor to force the encoding of the e_li
						instruction, potentially changing the user's specified instruction. This
						functionality supports small data area relocation types.
						(R_PPC_VLE_SDA21 and R_PPC_VLE_SDA21_LO).</para></note>

						<informaltable frame="all">
							<tgroup cols='11' colsep='0' rowsep='0'>
				
							<colspec colwidth="30" colname='c1' align="left">
							<colspec colwidth="30" colname='c2' align="right" colsep='1'>

							<colspec colwidth="40" colname='c3' align="left">
							<colspec colwidth="40" colname='c4' align="right" colsep='1'>

				
							<colspec colwidth="25" colname='c5' align="left">
							<colspec colwidth="25" colname='c6' align="right" colsep='1'>
				
							<colspec colwidth="20" colname='c7' align="center" colsep='1'>

							<colspec colwidth="25" colname='c8' align="left">
							<colspec colwidth="25" colname='c9' align="right" colsep='1'>

							<colspec colwidth="70" colname='c10' align="left">
							<colspec colwidth="70" colname='c11' align="right">
							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">5</entry>
									<entry namest="c3">6</entry>
									<entry namest="c4">10</entry>
									<entry namest="c5">11</entry>
									<entry namest="c6">15</entry>
									<entry namest="c7">16</entry>
									<entry namest="c8">17</entry>
									<entry namest="c9">20</entry>
									<entry namest="c10">21</entry>
									<entry namest="c11">31</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" align="center" colsep='1'>011100</entry>
									<entry namest="c3" nameend="c4" align="center" colsep='1'>---</entry>
									<entry namest="c5" nameend="c6" align="center" colsep='1'>split20</entry>
									<entry namest="c7" colsep='1'>0</entry>
									<entry namest="c8" nameend="c9" align="center" colsep='1'>split20</entry>
									<entry namest="c10" nameend="c11" align="center">split20</entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c3" nameend="c4" colsep='1'></entry>
									<entry namest="c5" nameend="c6" align="center" colsep='1'>4:8</entry>
									<entry namest="c7" colsep='1'></entry>
									<entry namest="c8" nameend="c9" colsep='1' align="center">0:3</entry>
									<entry namest="c10" nameend="c11" colsep='1' align="center">9:19</entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">split16a</emphasis></term>
					<listitem>

						<para>16-bit bit-field with the 5 MSBs occupying bits 11 to 15 (the rA
						field) and the remaining 11 bits occupying bits 21 to 31.</para>

						<informaltable frame="all">
							<tgroup cols='8' colsep='0' rowsep='0'>
				
							<colspec colwidth="70" colname='c1' align="left">
							<colspec colwidth="70" colname='c2' align="right" colsep='1'>

							<colspec colwidth="30" colname='c3' align="left">
							<colspec colwidth="30" colname='c4' align="right" colsep='1'>

				
							<colspec colwidth="30" colname='c5' align="left">
							<colspec colwidth="30" colname='c6' align="right" colsep='1'>
				

							<colspec colwidth="70" colname='c7' align="left">
							<colspec colwidth="70" colname='c8' align="right">
							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">10</entry>
									<entry namest="c3">11</entry>
									<entry namest="c4">15</entry>
									<entry namest="c5">16</entry>
									<entry namest="c6">20</entry>
									<entry namest="c7">21</entry>
									<entry namest="c8">31</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" align="center" colsep='1'>---</entry>
									<entry namest="c3" nameend="c4" align="center" colsep='1'>split16a</entry>
									<entry namest="c5" nameend="c6" align="center" colsep='1'>---</entry>
									<entry namest="c7" nameend="c8" align="center" colsep='1'>split16a</entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c3" nameend="c4" colsep='1' align="center">0:4</entry>
									<entry namest="c5" nameend="c6" align="center" colsep='1'></entry>
									<entry namest="c7" nameend="c8" align="center">5:15</entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>
				<varlistentry>
					<term><emphasis role="bold">split16d</emphasis></term>
					<listitem>

						<para>16-bit bit-field with the 5 MSBs occupying bits 6 to 10 (the rD
						field) and the remaining 11 bits occupying bits 21 to 31.</para>

						<informaltable frame="all">
							<tgroup cols='9' colsep='0' rowsep='0'>
				
							<colspec colwidth="30" colname='c1' align="left">
							<colspec colwidth="30" colname='c2' align="right" colsep='1'>

							<colspec colwidth="40" colname='c3' align="left">
							<colspec colwidth="40" colname='c4' align="right" colsep='1'>

							<colspec colwidth="60" colname='c5' align="left">
							<colspec colwidth="60" colname='c6' align="right" colsep='1'>

							<colspec colwidth="70" colname='c7' align="left">
							<colspec colwidth="70" colname='c8' align="right">
							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">5</entry>
									<entry namest="c3">6</entry>
									<entry namest="c4">10</entry>
									<entry namest="c5">11</entry>
									<entry namest="c6">20</entry>
									<entry namest="c7">21</entry>
									<entry namest="c8">31</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" align="center" colsep='1'>---</entry>
									<entry namest="c3" nameend="c4" align="center" colsep='1'>split16d</entry>
									<entry namest="c5" nameend="c6" align="center" colsep='1'>---</entry>
									<entry namest="c7" nameend="c8" align="center">split16d</entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c3" nameend="c4" colsep='1' align="center">0:4</entry>
									<entry namest="c5" nameend="c6" align="center" colsep='1'></entry>
									<entry namest="c7" nameend="c8" align="center">5:15</entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">bdh24</emphasis></term>
					<listitem>

						<para>24-bit bit-field occupying bits 7 to 30 used to resolve branch displacements to half-word boundaries.</para>

						<informaltable frame="all">
							<tgroup cols='5' colsep='0' rowsep='0'>
				
							<colspec colwidth="35" colname='c1' align="left">
							<colspec colwidth="35" colname='c2' align="right" colsep='1'>

							<colspec colwidth="150" colname='c3' align="left">
							<colspec colwidth="155" colname='c4' align="right" colsep='1'>

							<colspec colwidth="25" colname='c5' align="center">
							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">6</entry>
									<entry namest="c3">7</entry>
									<entry namest="c4">30</entry>
									<entry namest="c5">31</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" align="center" colsep='1'>---</entry>
									<entry namest="c3" nameend="c4" align="center" colsep='1'>bdh24</entry>
									<entry namest="c5" align="center">--</entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c3" nameend="c4" colsep='1'></entry>
									<entry namest="c5"></entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">bdh15</emphasis></term>
					<listitem>

						<para>15-bit bit-field occupying bits 16 to 30 used to resolve branch displacements to half-word boundaries.</para>

						<informaltable frame="all">
							<tgroup cols='5' colsep='0' rowsep='0'>
				
							<colspec colwidth="100" colname='c1' align="left">
							<colspec colwidth="100" colname='c2' align="right" colsep='1'>

							<colspec colwidth="85" colname='c3' align="left">
							<colspec colwidth="90" colname='c4' align="right" colsep='1'>

							<colspec colwidth="25" colname='c5' align="center">
							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">15</entry>
									<entry namest="c3">16</entry>
									<entry namest="c4">30</entry>
									<entry namest="c5">31</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" align="center" colsep='1'>---</entry>
									<entry namest="c3" nameend="c4" align="center" colsep='1'>bdh15</entry>
									<entry namest="c5" align="center">--</entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c3" nameend="c4" colsep='1'></entry>
									<entry namest="c5"></entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>
				<varlistentry>
					<term><emphasis role="bold">bdh8</emphasis></term>
					<listitem>

						<para>8-bit bit-field occupying bits 8 to 15 of a half-word. This field is used by a 16-bit branch instruction.</para>

						<informaltable frame="all">
							<tgroup cols='4' colsep='0' rowsep='0'>
				
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right" colsep='1'>

							<colspec colwidth="50" colname='c3' align="left">
							<colspec colwidth="50" colname='c4' align="right">

							<tbody>
				
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2">7</entry>
									<entry namest="c3">8</entry>
									<entry namest="c4">15</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" align="center" colsep='1'>---</entry>
									<entry namest="c3" nameend="c4" align="center">bdh8</entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c3" nameend="c4"></entry>
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>

			</variablelist>

			</sect2>

<!--
			<sect2 id="EABI-RELOCATION-FIELDS" CONDITION="ATR-EABI"><title>EABI Relocation Fields</title>

			<variablelist>

				<varlistentry>
					<term><emphasis role="bold">uword32</emphasis></term>
					<listitem>
						<para>32-bit bit-field occupying 4 bytes.</para>

						<informaltable frame="all">
							<tgroup cols='8' colsep='0' rowsep='0'>
				
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c3' align="left" colsep='1'>
							<colspec colwidth="50" colname='c4' align="right">
				
							<colspec colwidth="50" colname='c5' align="left">
							<colspec colwidth="50" colname='c6' align="right" colsep='1'>
							
							<colspec colwidth="50" colname='c7' align="left">
							<colspec colwidth="50" colname='c8' align="right">
							<tbody>
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2" colsep='1'>3</entry>
									<entry namest="c3" colsep='1'>1</entry>
									<entry namest="c4" colsep='1'>2</entry>
									<entry namest="c5">2</entry>
									<entry namest="c6">1</entry>
									<entry namest="c7">3</entry>
									<entry namest="c8" colsep='1'>0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c4" nameend="c8" align="center"></entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2">0</entry>
									<entry namest="c3" colsep='1' align="right">10</entry>
									<entry namest="c8" align="right">31</entry>
				
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">ulow21</emphasis></term>
					<listitem>
						<para>21-bit bit-field occupying the least significant bits of the 24-bit field pointed to by the relocation entry.</para>

						<informaltable frame="all">
							<tgroup cols='8' colsep='0' rowsep='0'>
				
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c3' align="left" colsep='1'>
							<colspec colwidth="50" colname='c4' align="right">
				
							<colspec colwidth="50" colname='c5' align="left">
							<colspec colwidth="50" colname='c6' align="right" colsep='1'>
							
							<colspec colwidth="50" colname='c7' align="left">
							<colspec colwidth="50" colname='c8' align="right">
							<tbody>
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2" colsep='1'>3</entry>
									<entry namest="c3" colsep='1'>1</entry>
									<entry namest="c4" colsep='1'>2</entry>
									<entry namest="c5">2</entry>
									<entry namest="c6">1</entry>
									<entry namest="c7">3</entry>
									<entry namest="c8" colsep='1'>0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c4" nameend="c8" align="center"></entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2">0</entry>
									<entry namest="c3" colsep='1' align="right">10</entry>
									<entry namest="c8" align="right">31</entry>
				
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">uhalf16</emphasis></term>
					<listitem>
						<para>16-bit bit-field occupying 2 bytes (e.g., Add Immediate instruction's immediate field).</para>

						<informaltable frame="all">
							<tgroup cols='8' colsep='0' rowsep='0'>
				
							<colspec colwidth="50" colname='c1' align="left">
							<colspec colwidth="50" colname='c2' align="right" colsep='1'>
				
							<colspec colwidth="50" colname='c3' align="left" colsep='1'>
							<colspec colwidth="50" colname='c4' align="right">
				
							<colspec colwidth="50" colname='c5' align="left">
							<colspec colwidth="50" colname='c6' align="right" colsep='1'>
							
							<colspec colwidth="50" colname='c7' align="left">
							<colspec colwidth="50" colname='c8' align="right">
							<tbody>
								<row>
									<entry namest="c1">0</entry>
									<entry namest="c2" colsep='1'>3</entry>
									<entry namest="c3" colsep='1'>1</entry>
									<entry namest="c4" colsep='1'>2</entry>
									<entry namest="c5">2</entry>
									<entry namest="c6">1</entry>
									<entry namest="c7">3</entry>
									<entry namest="c8" colsep='1'>0</entry>
								</row>
								<row>
									<entry namest="c1" nameend="c2" colsep='1'></entry>
									<entry namest="c4" nameend="c8" align="center"></entry>
								</row>	
								<row>
									<entry namest="c1" nameend="c2">0</entry>
									<entry namest="c3" colsep='1' align="right">10</entry>
									<entry namest="c8" align="right">31</entry>
				
								</row>
							</tbody>
							</tgroup>
						</informaltable>

					</listitem>
				</varlistentry>
			</variablelist>


			</sect2> -->
			<sect2 id="RELOCATION-NOTATIONS"><title>Relocation Notations</title>
			<para>The following notations are used in the relocation table.</para>

			<variablelist>
				<varlistentry>
					<term><emphasis role="bold">A</emphasis></term> 
					<listitem>
						<para>Represents the addend used to compute the value of the relocatable field.</para>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">B</emphasis></term> 
					<listitem>

						<para>Represents the base address at which a shared object file has been
						loaded into memory during execution.  Generally, a shared object file is
						built with a 0 base virtual address, but the execution address will be
						different.  See Program Header in the System V ABI for more information
						about the base address.</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">G</emphasis></term> 
					<listitem>

						<para>Represents the offset into the <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis>, relative to
						the <varname>_GLOBAL_OFFSET_TABLE_</varname> symbol, at which the address of the relocation
						entry's symbol will reside during execution.  This implies the creation
						of a <emphasis role="bold">.got</emphasis> section.  See <emphasis><xref linkend="CODE-EX"></emphasis> and the <emphasis><xref linkend="GLOBAL-OFFSET-TABLE"></emphasis> for more information.</para>

						<para>Reference in a calculation to the value G implicitly creates a GOT
						entry for the indicated symbol.</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">L</emphasis></term> 
					<listitem>

						<para>Represents the section offset or address of the procedure linkage
						table entry for the symbol.  This implies the creation of a <emphasis
						role="bold">.plt</emphasis> section if one does not already exist.  It
						also implies the creation of a PLT entry for resolving the symbol.  For
						an unresolved symbol the PLT entry points to a PLT resolver stub.  For a
						resolved symbol a <emphasis><link linkend="PLT">Procedure Linkage Table</link></emphasis> entry holds the final
						effective address of a dynamically resolved symbol (see <emphasis><xref linkend="PLT"></emphasis>).</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">P</emphasis></term> 
					<listitem>

						<para>Represents the place (section offset or address) of the storage
						unit being relocated (computed using <varname>r_offset</varname>).</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">R</emphasis></term> 
					<listitem>

						<para>Represents the offset of the symbol within the section in which
						the symbol is defined (its section-relative address).</para> 

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">S</emphasis></term> 
					<listitem>
						<para>Represents the value of the symbol whose index resides in the
						relocation entry.</para>

						<para CONDITION="ATR-EABI">Represents the value of the symbol whose index resides in the
						relocation entry's <varname>r_info</varname> field.</para>
					</listitem>
				</varlistentry>
			</variablelist>


			<variablelist CONDITION="ATR-EABI">
				<varlistentry>
					<term><emphasis role="bold">T</emphasis></term> 
					<listitem>

						<para>Represents the offset from <varname>_SDA_BASE_</varname> to the location in the .sdata section that the
						link editor placed the address of the symbol whose index is in <varname>r_info</varname>.  See
						the description for R_PPC_EMB_SDAI16 in <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>.</para>

					</listitem>
				</varlistentry>
				<varlistentry>
					<term><emphasis role="bold">U</emphasis></term>
					<listitem>

						<para>Represents the offset from <varname>_SDA2_BASE_</varname> to the location in the .PPC.EMB.sdata2 section that
						the link editor placed the address of the symbol whose index is in <varname>r_info</varname>.
						See the description for R_PPC_EMB_SDA2I16 in <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>.</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">V</emphasis></term>
					<listitem>

						<para>Represents the offset to the symbol whose index is in <varname>r_info</varname> from
						the start of that symbol's containing section.</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">W</emphasis></term>
					<listitem>

						<para>Represents the address of the start of the section containing the
						symbol whose index is in <varname>r_info</varname>.</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">X</emphasis></term>
					<listitem>

						<para>Represents the offset from the appropriate base (<varname>_SDA_BASE_</varname>,
						<varname>_SDA2_BASE_</varname>, or 0) to where the link editor placed the symbol whose index is
						in <varname>r_info</varname>. This notation is generalized for the T and U cases.</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">Y</emphasis></term>
					<listitem>

						<para>Represents a 5-bit value for the base register for the section
						where the link editor placed the symbol whose index is in <varname>r_info</varname>. Acceptable
						values are: the value 13 for symbols in .sdata or.sbss, the value 2 for
						symbols in .PPC.EMB.sdata2 or .PPC.EMB.sbss2, or the value 0 for symbols
						in .PPC.EMB.sdata0 or .PPC.EMB.sbss0.</para>


					</listitem>
				</varlistentry>

			</variablelist>
			<variablelist>
				<varlistentry>
					<term><emphasis role="bold">&plus;</emphasis></term>
					<listitem>
					 	<para>Denotes 32-bit modulus addition.</para>
					 </listitem>
				</varlistentry>
				<varlistentry>
					<term><emphasis role="bold">&minus;</emphasis></term>
					<listitem>	
						<para>Denotes 32-bit modulus subtraction.</para>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term><emphasis role="bold">&gt;&gt;</emphasis></term>
					<listitem>
						<para>Denotes arithmetic right-shifting.</para>
					</listitem>
				</varlistentry>
				<varlistentry CONDITION="ATR-EABI">
					<term>&verbar;&verbar;</term>
					<listitem>
						<para>Denotes concatenation of bits or bit-fields.</para>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">&num;lo(value)</emphasis></term>
					<listitem>
						<para>Denotes the least significant 16 bits of the indicated value, i.e.,</para>

						<programlisting>&num;lo(x) &equals; (x &amp; 0xffff).</programlisting>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">&num;hi(value)</emphasis></term>
					<listitem>
						<para>Denotes bits 16 through 31 of the indicated value, i.e.,</para>

						<programlisting> &num;hi(x) &equals; ((x &gt;&gt; 16) &amp; 0xffff).</programlisting>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">&num;ha(value)</emphasis></term>
					<listitem>

						<para>Denotes the high adjusted value: bits 16 through 31 of the
						indicated value, compensating for &num;lo() being treated as a signed
						number, i.e.,</para>

						<programlisting> &num;ha(x) &equals; (((x &gt;&gt; 16) &plus; ((x &amp; 0x8000) &quest; 1 &colon; 0)) &amp; 0xffff)</programlisting>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold"><varname>_SDA_BASE_</varname></emphasis></term>
					<listitem>

						<para>A symbol defined by the link editor whose value in
						shared objects is the same as <varname>_GLOBAL_OFFSET_TABLE_</varname>, and in executable
						programs is an address within the small data area.</para>
					</listitem>
				</varlistentry>

				<varlistentry CONDITION="ATR-EABI">
					<term><emphasis role="bold"><varname>_SDA2_BASE_</varname></emphasis></term>
					<listitem>

						<para>A symbol defined by the link editor whose value in executable
						programs is an address within the small data 2 area.  See
						<emphasis><xref linkend="SMALL-DATA-AREA-E500"></emphasis>
						for more details.</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold"><varname>_BRTAKEN</varname></emphasis></term>
					<term><emphasis role="bold"><varname>_BRNTAKEN_</varname></emphasis></term>
					<listitem>

						<para>Specify whether the branch prediction bit (bit 10) should
						indicate that the branch will be taken or not taken, respectively.  For
						an unconditional branch, the branch prediction bit must be 0.  </para>

					</listitem>
				</varlistentry>
			</variablelist>


			<para>The following rules apply to the relocation types defined in the
			relocation table described later:</para>

			<itemizedlist>
				<listitem>
					<para>For relocation types in which the names contain 14 or 16,
					the upper 17 bits of the value computed before shifting must all be
					the same.  For relocation types whose names contain 24, the upper
					7 bits of the value computed before shifting must all be the same.
					For relocation types whose names contain 14 or 24, the low 2
					bits of the value computed before shifting must all be zero.</para>
				</listitem>

				<listitem CONDITION="ATR-VLE">
		
					<para>For relocation types associated with branch displacements, in which the name of the relocation type contains
					8, the upper 24 bits of the computed value before shifting must all be the same (either all zeros or all ones &mdash; that
					is, sign-extended displacement). For relocation types in which the name contains 15, the upper 17 bits of the computed
					value before shifting must all be the same. For relocation types in which the name contains 24, the upper 7 bits of
					the computed value before shifting must all be the same. For relocation types whose names contain 8, 15, or 24, the
					low 1-bit of the computed value before shifting must be zero (half-word boundary).</para>
		
				</listitem>


				<listitem CONDITION="ATR-EABI-EXTENDED">

					<para>EABI optional relocation types are marked with a percentage symbol (%) after their name.
					These are provided for dynamic linking and for compatibility with existing
					vendor-defined relocations.</para>

				</listitem>

				<listitem>
					<para>The relocation types whose Field column entry contains an asterisk (*) are subject to failure if the
					value computed does not fit in the allocated bits.</para>
				</listitem>	

			</itemizedlist>
			</sect2>
			<sect2 id="RELOCATION-TYPES-TABLE">
			<title>Relocation Types Table</title>

			<table id="RELOCATION-TABLE" frame="none"><title>Relocation Table</title>
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<thead>
						<row>
							<entry namest="c1" rowsep='1'>Relocation Name</entry>
							<entry namest="c2" rowsep='1'>Value</entry>
							<entry namest="c3" rowsep='1'>Field</entry>
							<entry namest="c4" rowsep='1'>Expression</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry namest="c1">R_PPC_NONE</entry>
							<entry namest="c2">0</entry>
    							<entry namest="c3">none</entry>
    							<entry namest="c4">none</entry>
						</row>
						<row>
							<entry namest="c1">R_PPC_ADDR32</entry>
							<entry namest="c2">1</entry>
    							<entry namest="c3">word32</entry>
  							<entry namest="c4">S &plus; A</entry>
						</row>
						<row>
							<entry namest="c1">R_PPC_ADDR24</entry>
							<entry namest="c2">2</entry>
    							<entry namest="c3">low24*</entry>
  							<entry namest="c4">(S &plus; A) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry namest="c1">R_PPC_ADDR16</entry>
							<entry namest="c2">3</entry>
    							<entry namest="c3">half16*</entry>
 							<entry namest="c4">S &plus; A</entry>
						</row>
						<row>
							<entry namest="c1">R_PPC_ADDR16_LO</entry>
							<entry namest="c2">4</entry>
    							<entry namest="c3">half16</entry>
  							<entry namest="c4">&num;lo(S &plus; A)</entry>
						</row>
						<row>
							<entry namest="c1">R_PPC_ADDR16_HI</entry>
							<entry namest="c2">5</entry>
    							<entry namest="c3">half16</entry>
  							<entry namest="c4">&num;hi(S &plus; A)</entry>
						</row>
						<row>
							<entry namest="c1">R_PPC_ADDR16_HA</entry>
							<entry namest="c2">6</entry>
    							<entry namest="c3">half16</entry>
  							<entry namest="c4">&num;ha(S &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_ADDR14</entry>
							<entry>7</entry>
    							<entry>low14*</entry>
  							<entry>(S &plus; A) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry>R_PPC_ADDR14_BRTAKEN</entry>
							<entry>8</entry>
    							<entry>low14*</entry>
  							<entry>(S &plus; A) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry>R_PPC_ADDR14_BRNTAKEN</entry>
       							<entry>9</entry>
    							<entry>low14*</entry>
  							<entry>(S &plus; A) &gt;&gt; 2</entry> 
						</row>
					</tbody>
				</tgroup>
			</table> 
			
			<!-- CONDITION="ATR-BSS-PLT"  -->
			<!-- Removed because REL24 is used for all static "non -fpic" branches for both the BSS-PLT and the SECURE-PLT. -->
	
			<informaltable frame="none">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_REL24</entry>
							<entry>10</entry>
							<entry>low24*</entry>
							<entry>(S &plus; A &minus; P) &gt;&gt; 2</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_REL14</entry>
							<entry>11</entry>
							<entry>low14*</entry>
							<entry>(S &plus; A &minus; P) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry>R_PPC_REL14_BRTAKEN</entry>
							<entry>12</entry>
							<entry>low14*</entry>
							<entry>(S &plus; A &minus; P) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry>R_PPC_REL14_BRNTAKEN</entry>
							<entry>13</entry>
							<entry>low14*</entry>
							<entry>(S &plus; A &minus; P) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry>R_PPC_GOT16</entry>
							<entry>14</entry>
							<entry>half16*</entry>
							<entry>G</entry>
						</row>
						<row>
							<entry>R_PPC_GOT16_LO</entry>
							<entry>15</entry>
							<entry>half16</entry>
							<entry>&num;lo(G)</entry>
						</row>
						<row>
							<entry>R_PPC_GOT16_HI</entry>
							<entry>16</entry>
							<entry>half16</entry>
							<entry>&num;hi(G)</entry>
						</row>
						<row>
							<entry>R_PPC_GOT16_HA</entry>
							<entry>17</entry>
							<entry>half16</entry>
							<entry>&num;ha(G)</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none" CONDITION="ATR-LINUX">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_PLTREL24</entry>
							<entry>18</entry>
							<entry>low24*</entry>
							<entry>(L &plus; A &minus; P) &gt;&gt; 2</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none" CONDITION="ATR-EABI-EXTENDED">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_PLTREL24%</entry>
							<entry>18</entry>
							<entry>low24*</entry>
							<entry>(L &plus; A &minus; P) &gt;&gt; 2</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_COPY</entry>
							<entry>19</entry>
							<entry>none</entry>
							<entry>(see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_GLOB_DAT</entry>
							<entry>20</entry>
							<entry>word32</entry>
							<entry>S &plus; A (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_JMP_SLOT</entry>
							<entry>21</entry>
							<entry>none</entry>
							<entry>(see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_RELATIVE</entry>
							<entry>22</entry>
							<entry>word32</entry>
							<entry>B&plus;A (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>



			<informaltable frame="none" CONDITION="ATR-LINUX">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_LOCAL24PC</entry>
							<entry>23</entry>
							<entry>low24*</entry>
							<entry>(see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none" CONDITION="ATR-EABI-EXTENDED">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_LOCAL24PC%</entry>
							<entry>23</entry>
							<entry>low24*</entry>
							<entry>(see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_UADDR32</entry>
							<entry>24</entry>
							<entry>word32*</entry>
							<entry>S &plus; A (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_UADDR16</entry>
							<entry>25</entry>
							<entry>half16*</entry>
							<entry>S &plus; A (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_REL32</entry>
							<entry>26</entry>
							<entry>word32*</entry>
							<entry>S &plus; A &minus; P</entry>
						</row>
						<row>
							<entry>R_PPC_PLT32</entry>
							<entry>27</entry>
							<entry>word32*</entry>
							<entry>L</entry>
						</row>
						<row>
							<entry>R_PPC_PLTREL32</entry>
							<entry>28</entry>
							<entry>word32*</entry>
							<entry>L&minus;P</entry>
						</row>
						<row>
							<entry>R_PPC_PLT16_LO</entry>
							<entry>29</entry>
							<entry>half16</entry>
							<entry>&num;lo(L)</entry>
						</row>
						<row>
							<entry>R_PPC_PLT16_HI</entry>
							<entry>30</entry>
							<entry>half16</entry>
							<entry>&num;hi(L)</entry>
						</row>
						<row>
							<entry>R_PPC_PLT16_HA</entry>
							<entry>31</entry>
							<entry>half16</entry>
							<entry>&num;ha(L)</entry>
						</row>
						<row>
							<entry>R_PPC_SECTOFF</entry>
							<entry>33</entry>
							<entry>half16*</entry>
							<entry>R &plus; A</entry>
						</row>
						<row>
							<entry>R_PPC_SECTOFF_LO</entry>
							<entry>34</entry>
							<entry>half16</entry>
							<entry>&num;lo(R &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_SECTOFF_HI</entry>
							<entry>35</entry>
							<entry>half16</entry>
							<entry>&num;hi(R &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_SECTOFF_HA</entry>
							<entry>36</entry>
							<entry>half16</entry>
							<entry>&num;ha(R &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_ADDR30</entry>
							<entry>37</entry>
							<entry>word30</entry>
							<entry>(S &plus; A &minus; P) &gt;&gt; 2</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable> 
<!--			<informaltable frame="none">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
-->
	

			<table id="RELOCATION-TABLE-CONTINUED" frame="none"><title>Relocation Table - Continued</title>
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<thead>
						<row>
							<entry namest="c1" rowsep='1'>Relocation Name</entry>
							<entry namest="c2" rowsep='1'>Value</entry>
							<entry namest="c3" rowsep='1'>Field</entry>
							<entry namest="c4" rowsep='1'>Expression</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry namest='c2'>38</entry>
						</row>
						<row>
							<entry namest='c1'></entry>
							<entry namest='c2'>...</entry>
							<entry namest='c4' valign="middle">Assigned to the PowerPC 64-bit ABI.</entry>
						</row>
						<row>
							<entry namest='c2'>66</entry>
						</row>
						<row>
							<entry namest='c2'>67</entry>
						</row>
						<row>
							<entry namest='c1'></entry>
							<entry namest='c2'>...</entry>
							<entry namest='c4' valign="middle">Assigned to the TLS ABI.<phrase
							CONDITION="ATR-TLS"> These relocations are described in the
							<emphasis><link linkend="TLS-RELOCATION-TABLE">TLS Relocation Table</link></emphasis> in
							<emphasis><xref linkend="TLS-ABI"></emphasis>.</phrase></entry>


						</row>
						<row>
							<entry namest='c2'>100</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
<!--			</informaltable> -->

			<informaltable frame="none" CONDITION="!ATR-EABI">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry></entry>
							<entry>101</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Assigned for embedded system use.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>116</entry>
							<entry></entry>
							<entry></entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none" CONDITION="ATR-EABI">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_EMB_NADDR32</entry>
							<entry>101</entry>
							<entry>word32</entry>
							<entry>(A &minus; S)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_NADDR16</entry>
							<entry>102</entry>
							<entry>half16*</entry>
							<entry>(A &minus; S)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_NADDR16_LO</entry>
							<entry>103</entry>
							<entry>half16</entry>
							<entry>&num;lo(A &minus; S)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_NADDR16_HI</entry>
							<entry>104</entry>
							<entry>half16</entry>
							<entry>&num;hi(A &minus; S)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_NADDR16_HA</entry>
							<entry>105</entry>
							<entry>half16</entry>
							<entry>&num;ha(A &minus; S)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SDAI16</entry>
							<entry>106</entry>
							<entry>half16*</entry>
							<entry>T (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SDA2I16</entry>
							<entry>107</entry>
							<entry>half16*</entry>
							<entry>U (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SDA2REL</entry>
							<entry>108</entry>
							<entry>half16*</entry>
							<entry>S &plus; A&minus;<varname>_SDA2_BASE_</varname></entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SDA21</entry>
							<entry>109</entry>
							<entry>low21</entry>
							<entry>Y &verbar;&verbar; (X &plus; A) (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_MRKREF</entry>
							<entry>110</entry>
							<entry>none</entry>
							<entry>(see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_RELSEC16</entry>
							<entry>111</entry>
							<entry>half16*</entry>
							<entry>V &plus; A</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_RELST_LO</entry>
							<entry>112</entry>
							<entry>half16</entry>
							<entry>&num;lo(W &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_RELST_HI</entry>
							<entry>113</entry>
							<entry>half16</entry>
							<entry>&num;hi(W &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_RELST_HA</entry>
							<entry>114</entry>
							<entry>half16</entry>
							<entry>&num;ha(W &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_BIT_FLD</entry>
							<entry>115</entry>
							<entry>word32*</entry>
							<entry>(see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_RELSDA</entry>
							<entry>116</entry>
							<entry>half16</entry>
							<entry>X &plus; A (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry></entry>
							<entry>117</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Reserved for future use.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>179</entry>
							<entry></entry>
							<entry></entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

<!--	
						<row>
							<entry>R_PPC_EMB_RELOC_120&diams;</entry>
							<entry>120</entry>
							<entry>half16*</entry>
							<entry>S &plus; A</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_RELOC_121&diams;</entry>
							<entry>121</entry>
							<entry>half16*</entry>
							<entry>Same calculation as U, except that the value 0 is used instead of <varname>_SDA2_BASE_</varname>.</entry>
						</row>
						-->

			<informaltable frame="none" CONDITION="ATR-EABI-EXTENDED">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_DIAB_SDA21_LO%</entry>
							<entry>180</entry>
							<entry>low21</entry>
							<entry>Y &verbar;&verbar; &num;lo(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_DIAB_SDA21_HI%</entry>
							<entry>181</entry>
							<entry>low21</entry>
							<entry>Y &verbar;&verbar; &num;hi(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_DIAB_SDA21_HA%</entry>
							<entry>182</entry>
							<entry>low21</entry>
							<entry>Y &verbar;&verbar; &num;ha(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_DIAB_RELSDA_LO%</entry>
							<entry>183</entry>
							<entry>half16</entry>
							<entry>&num;lo(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_DIAB_RELSDA_HI%</entry>
							<entry>184</entry>
							<entry>half16</entry>
							<entry>&num;hi(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_DIAB_RELSDA_HA%</entry>
							<entry>185</entry>
							<entry>half16</entry>
							<entry>&num;ha(X &plus; A)</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
	
						<row>
							<entry></entry>
							<entry>186</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Reserved for future embedded system use.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>200</entry>
							<entry></entry>
							<entry></entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none" CONDITION="!ATR-SPE">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry></entry>
							<entry>201</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Assigned for use by APUs.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>215</entry>
							<entry></entry>
							<entry></entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none" CONDITION="ATR-SPE">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='185' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='40' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_EMB_SPE_DOUBLE</entry>
							<entry>201</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A)) &gt;&gt; 3</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_WORD</entry>
							<entry>202</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A)) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_HALF</entry>
							<entry>203</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A)) &gt;&gt; 1</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_DOUBLE_SDAREL</entry>
							<entry>204</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A&minus;<varname>_SDA_BASE_</varname>)) &gt;&gt; 3</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_WORD_SDAREL</entry>
							<entry>205</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A&minus;<varname>_SDA_BASE_</varname>)) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_HALF_SDAREL</entry>
							<entry>206</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A&minus;<varname>_SDA_BASE_</varname>)) &gt;&gt; 1</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_DOUBLE_SDA2REL</entry>
							<entry>207</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A&minus;<varname>_SDA2_BASE_</varname>)) &gt;&gt; 3</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_WORD_SDA2REL</entry>
							<entry>208</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A&minus;<varname>_SDA2_BASE_</varname>)) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_HALF_SDA2REL</entry>
							<entry>209</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A&minus;<varname>_SDA2_BASE_</varname>)) &gt;&gt; 1</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_DOUBLE_SDA0REL</entry>
							<entry>210</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A)) &gt;&gt; 3</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_WORD_SDA0REL</entry>
							<entry>211</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A)) &gt;&gt; 2</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_HALF_SDA0REL</entry>
							<entry>212</entry>
							<entry>mid5*</entry>
							<entry>(&num;lo(S &plus; A)) &gt;&gt; 1</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_DOUBLE_SDA</entry>
							<entry>213</entry>
							<entry>mid10*</entry>
							<entry>Y &verbar;&verbar; ((&num;lo(X &plus; A)) &gt;&gt; 3)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_WORD_SDA</entry>
							<entry>214</entry>
							<entry>mid10*</entry>
							<entry>Y &verbar;&verbar; ((&num;lo(X &plus; A)) &gt;&gt; 2)</entry>
						</row>
						<row>
							<entry>R_PPC_EMB_SPE_HALF_SDA</entry>
							<entry>215</entry>
							<entry>mid10*</entry>
							<entry>Y &verbar;&verbar; ((&num;lo(X &plus; A)) &gt;&gt; 1)</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none" CONDITION="ATR-VLE">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='120' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_VLE_REL8</entry>
							<entry>216</entry>
							<entry>bdh8</entry>
							<entry>(S &plus; A &minus; P) &gt;&gt; 1</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_REL15</entry>
							<entry>217</entry>
							<entry>bdh15</entry>
							<entry>(S &plus; A &minus; P) &gt;&gt; 1</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_REL24</entry>
							<entry>218</entry>
							<entry>bdh24</entry>
							<entry>(S &plus; A &minus; P) &gt;&gt; 1</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_LO16A</entry>
							<entry>219</entry>
							<entry>split16a</entry>
							<entry>&num;lo(S &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_LO16D</entry>
							<entry>220</entry>
							<entry>split16d</entry>
							<entry>&num;lo(S &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_HI16A</entry>
							<entry>221</entry>
							<entry>split16a</entry>
							<entry>&num;hi(S &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_HI16D</entry>
							<entry>222</entry>
							<entry>split16d</entry>
							<entry>&num;hi(S &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_HA16A</entry>
							<entry>223</entry>
							<entry>split16a</entry>
							<entry>&num;ha(S &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_HA16D</entry>
							<entry>224</entry>
							<entry>split16d</entry>
							<entry>&num;ha(S &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_SDA21</entry>
							<entry>225</entry>
							<entry>low21</entry>
							<entry morerows="1">Y &verbar;&verbar; (X &plus; A) (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row>
							<entry></entry>
							<entry></entry>
							<entry>split20</entry>
							<entry></entry>
						</row>
						<row>
							<entry>R_PPC_VLE_SDA21_LO</entry>
							<entry>226</entry>
							<entry>low21 split20</entry>
							<entry>Y &verbar;&verbar; &num;lo(X &plus; A) (see <emphasis><xref linkend="RELOCATION-DESCRIPTIONS"></emphasis>)</entry>
						</row>
						<row> 
							<entry>R_PPC_VLE_SDAREL_LO16A</entry>
							<entry>227</entry>
							<entry>split16a</entry>
							<entry>&num;lo(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_SDAREL_LO16D</entry>
							<entry>228</entry>
							<entry>split16d</entry>
							<entry>&num;lo(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_SDAREL_HI16A</entry>
							<entry>229</entry>
							<entry>split16a</entry>
							<entry>&num;hi(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_SDAREL_HI16D</entry>
							<entry>230</entry>
							<entry>split16d</entry>
							<entry>&num;hi(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_SDAREL_HA16A</entry>
							<entry>231</entry>
							<entry>split16a</entry>
							<entry>&num;ha(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_SDAREL_HA16D</entry>
							<entry>232</entry>
							<entry>split16d</entry>
							<entry>&num;ha(X &plus; A)</entry>
						</row>
						<row>
							<entry>R_PPC_VLE_ADDR20</entry>
							<entry>233</entry>
							<entry>split20</entry>
							<entry>S &plus; A</entry>
						</row>
<!--						<row>
							<entry></entry>
							<entry>234</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Reserved for VLE use.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>248</entry>
							<entry></entry>
							<entry></entry>
						</row> -->

					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none" CONDITION="!ATR-VLE">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry></entry>
							<entry>216</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Assigned for VLE use.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>233</entry>
							<entry></entry>
							<entry></entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry></entry>
							<entry>234</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Reserved for future use.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>248</entry>
							<entry></entry>
							<entry></entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
			<informaltable frame="none" CONDITION="ATR-SECURE-PLT">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry>R_PPC_REL16</entry>
							<entry>249</entry>
							<entry>half16*</entry>
							<entry>S &plus; A &minus; P</entry>
						</row>
						<row>
							<entry>R_PPC_REL16_LO</entry>
							<entry>250</entry>
							<entry>half16</entry>
							<entry>&num;lo(S &plus; A &minus; P)</entry>
						</row>
						<row>
							<entry>R_PPC_REL16_HI</entry>
							<entry>251</entry>
							<entry>half16</entry>
							<entry>&num;hi(S &plus; A &minus; P)</entry>
						</row>
						<row>
							<entry>R_PPC_REL16_HA</entry>
							<entry>252</entry>
							<entry>half16</entry>
							<entry>&num;ha(S &plus; A &minus; P)</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>

			<informaltable frame="none" CONDITION="!ATR-SECURE-PLT">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry></entry>
							<entry>249</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Assigned for use by the Secure-PLT ABI.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>252</entry>
							<entry></entry>
							<entry></entry>
						</row>
					</tbody>

				</tgroup>
			</informaltable>
			<informaltable frame="none">
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='170' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='50' colname='c3' align="left">
					<colspec colwidth='140' colname='c4' align="left">
					<tbody>
						<row>
							<entry></entry>
							<entry>253</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Reserved for future use.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>255</entry>
							<entry></entry>
							<entry></entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
			</sect2>
			<sect2 id="RELOCATION-DESCRIPTIONS"><title>Relocation Descriptions</title>

		<para>The following list describes relocations which can require special handling or description.</para>

		<variablelist>
			<!--	<title>Relocation Descriptions</title> -->
				<varlistentry>
					<term><emphasis role="bold">R_PPC_GOT16*</emphasis></term>
					<listitem>
						<para>These relocation types resemble the corresponding R_PPC_ADDR16* types, except that they refer
						to the address of the symbol's <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis> entry and additionally instruct the link editor to
						build a <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis>.</para>

					</listitem>
				</varlistentry>

				<varlistentry id="R-PPC-REL16" CONDITION="ATR-SECURE-PLT">
					<term><emphasis role="bold">R_PPC_REL16*</emphasis></term>
					<listitem>
						<para>These relocation types are used to compute the distance
						between a symbol address and the current address.  These relocations types are used
						under the Secure-PLT ABI to compute the address of the <emphasis
						role="bold">.got</emphasis> section because the link editor knows
						the fixed distance between the <varname>_GLOBAL_OFFSET_TABLE_</varname> symbol and an
						address in the <emphasis role="bold">.text</emphasis>
						section.</para>

					</listitem>
				</varlistentry>

				<varlistentry id="R-PPC-PLTREL24">
					<term><emphasis role="bold">R_PPC_PLTREL24</emphasis></term>

					<listitem>

						<para>This relocation indicates that reference to a symbol should be
						resolved through a call to the symbol's <emphasis><link linkend="PLT">Procedure Linkage Table</link></emphasis> entry.
						Additionally it instructs the link editor to build a procedure linkage
						table for the executable or shared object if one is not created.</para>

						<para CONDITION="ATR-BSS-PLT">Under the BSS-PLT ABI this relocation type may be implemented
						as a direct branch and link into the executable PLT slot which holds the
						absolute address (after resolution) of the specified symbol.  There is
						an implicit assumption that the <emphasis><link linkend="PLT">Procedure Linkage Table</link></emphasis> for a shared object or executable
						will be within &plusmn; 32 MB of an instruction that branches to
						it.</para>

						<para CONDITION="ATR-SECURE-PLT">Under the Secure PLT ABI this
						relocation type may be implemented as a branch to a stub used for loading the
						symbol's absolute address (after resolution) from its PLT slot.  There is
						an implicit assumption that the address of the PLT entry loading stub be
						within &plusmn; 32 MB of an instruction that branches to it, so that the
						R_PPC_PLTREL24 relocation type is the only one needed for accessing
						it.</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">R_PPC_COPY</emphasis></term>
					<listitem>
						<para>The link editor creates this relocation type for dynamic linking.  Its offset member refers to a
						location in a writable segment.  The symbol table index specifies a symbol that should exist both in
						the current relocatable file and in a shared object file.  During execution, the dynamic linker copies data
						associated with the shared object's symbol to the location specified by the offset.</para>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">R_PPC_GLOB_DAT</emphasis></term>
					<listitem>
						<para>This relocation type resembles R_PPC_ADDR, except that it sets a <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis> entry to
						the address of the specified symbol.  This special relocation type allows determination of the
						correspondence between symbols and <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis> entries.</para>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">R_PPC_JMP_SLOT</emphasis></term>
					<listitem>

						<para>The link editor creates this relocation type for dynamic linking.
						Its offset member gives the location of a <emphasis><link linkend="PLT">Procedure Linkage
						Table</link></emphasis> entry.  The dynamic linker modifies the
						<emphasis><link linkend="PLT">Procedure Linkage Table</link></emphasis> entry to transfer control to the designated
						symbol's address (see <emphasis><xref linkend="PLT"></emphasis>).</para>

					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">R_PPC_RELATIVE</emphasis></term>
					<listitem>
						<para>The link editor creates this relocation type for dynamic linking.  Its offset member gives a
						location within a shared object that contains a value representing a relative address.  The dynamic
						linker computes the corresponding virtual address by adding the virtual address at which the shared
						object was loaded to the relative address.  Relocation entries for this type must specify 0 for the
						symbol table index.</para>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">R_PPC_LOCAL24PC</emphasis></term>
					<listitem>
						<para>This relocation type resembles R_PPC_REL24, except that it uses the value of the symbol within
						the object, not an interposed value, for S in its calculation. The symbol referenced in this
						relocation normally is <varname>_GLOBAL_OFFSET_TABLE_</varname>, which additionally instructs the link editor to build
						the <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis>.</para>
					</listitem>
				</varlistentry>

				<varlistentry>
					<term><emphasis role="bold">R_PPC_UADDR*</emphasis></term>
					<listitem>
						<para>These relocation types are the same as the corresponding R_PPC32_ADDR* types, except that the
						datum to be relocated is allowed to be unaligned.</para>
					</listitem>
				</varlistentry>

				<varlistentry CONDITION="ATR-EABI">
					<term><emphasis role="bold">R_PPC_EMB_SDAI16</emphasis></term>
					<listitem>

						<para>This instructs the link editor to create a 4-byte, word-aligned entry in
						the .sdata section containing the address of the symbol whose index is
						in the relocation entry's <varname>r_info</varname> field. At most one
						such implicit .sdata entry shall be created per symbol per link, and
						only in an executable file or shared object file. In addition, the value used
						in the relocation calculation shall be the offset from
						<varname>_SDA_BASE_</varname> to the symbol's implicit entry. The
						relocation entry's <varname>r_addend</varname> field value shall be
						0.</para>
						
					</listitem>
				</varlistentry>

				<varlistentry CONDITION="ATR-EABI">
					<term><emphasis role="bold">R_PPC_EMB_SDA2I16</emphasis></term>
					<listitem>

						<para>This instructs the link editor to create a 4-byte, word-aligned entry in
						the .PPC.EMB.sdata2 section containing the address of the symbol whose
						index is in the relocation entry's <varname>r_info</varname> field. At
						most one such implicit .PPC.EMB.sdata2 entry shall be created per symbol
						per link, and only in an executable file. In addition, the value used in
						the relocation calculation shall be the offset from
						<varname>_SDA2_BASE_</varname> to the symbol's implicit entry. The
						relocation entry's <varname>r_addend</varname> field value shall be
						0.</para>

					</listitem>
				</varlistentry>

				<varlistentry CONDITION="ATR-SPE || ATR-EABI">
					<term><emphasis role="bold">R_PPC_EMB_SDA21  </emphasis></term>
					<listitem>
						<para></para>
						<para CONDITION="ATR-SPE">The most significant 11 bits at the address
						pointed to by the relocation entry shall be left unchanged.</para>

						<para CONDITION="ATR-EABI">The most significant 3 bits at the address
						pointed to by the relocation entry shall be left unchanged.</para>

						<para>If the symbol whose index is in <varname>r_info</varname> is
						contained in .sdata or .sbss, then the link editor shall place in the next most
						significant 5 bits the value 13 (for r13); if the symbol is in
						.PPC.EMB.sdata2 or .PPC.EMB.sbss2, then the link editor shall place in those
						5 bits the value 2 (for r2); if the symbol is in .PPC.EMB.sdata0 or
						.PPC.EMB.sbss0, then the link editor shall place in those 5 bits the value 0
						(for r0); otherwise, the link shall fail. The least significant 16
						bits of this field shall be set to the address of the symbol plus the
						relocation entry's <varname>r_addend</varname> value minus the
						appropriate base for the symbol's section: <varname>_SDA_BASE_</varname>
						for a symbol in .sdata or .sbss, <varname>_SDA2_BASE_</varname> for a
						symbol in .PPC.EMB.sdata2 or .PPC.EMB.sbss2, or 0 for a symbol in
						.PPC.EMB.sdata0 or .PPC.EMB.sbss0.</para>

						<para><note><title>note</title><para>Note: The source register in the <varname>ori</varname>, <varname>oris</varname>, <varname>xor</varname>, and <varname>xoris</varname> instructions
						(bits 6-10) are encoded differently than the <varname>addi</varname>, <varname>addis</varname>, <varname>ld</varname>, and  <varname>st</varname>
						instructions (bits 11-15). This relocation type is appropriate for
						<varname>add</varname> and <varname>ld</varname> instructions, but not for <varname>or</varname> and <varname>xor</varname> instructions.</para></note></para>

					</listitem>
				</varlistentry>

				<varlistentry CONDITION="ATR-SPE || ATR-EABI">
					<term><emphasis role="bold">R_PPC_EMB_MRKREF</emphasis></term>
					<listitem>

						<para>The symbol whose index is in <varname>r_info</varname> shall be in a different
						section from the section associated with the relocation entry itself.
						The relocation entry's <varname>r_offset</varname> and
						<varname>r_addend</varname> fields shall be ignored. Unlike other
						relocation types, the link editor shall not apply a relocation action to a
						location because of this type. This relocation type is used to prevent a
						link editor that does section garbage collecting from deleting an important
						but otherwise unreferenced section.</para>

					</listitem>
				</varlistentry>

				<varlistentry CONDITION="ATR-SPE || ATR-EABI">
					<term><emphasis role="bold">R_PPC_EMB_BIT_FLD</emphasis></term>
					<listitem>

						<para>The most significant 16 bits of the relocation entry's <varname>r_addend</varname> field shall be a value between 0
						and 31, representing a big-endian bit position within the entry's 32-bit location (e.g., 6 means the
						sixth most significant bit). The least significant 16 bits of <varname>r_addend</varname> shall be a value between 1 and
						32, representing a length in bits. The sum of the bit position plus the length shall not exceed 32. The
						link editor shall replace bits starting at the bit position for the specified length with the value of the
						symbol, treated as a signed entity.</para>

					</listitem>
				</varlistentry>

				<varlistentry CONDITION="ATR-SPE || ATR-EABI">
					<term><emphasis role="bold">R_PPC_EMB_RELSDA</emphasis></term>
					
					<listitem>

						<para>The link editor shall set the 16-bits at the address pointed to by the
						relocation entry to the address of the symbol whose index is in <varname>r_info</varname>
						plus the value of <varname>r_addend</varname> minus the appropriate base
						for the section containing the symbol: <varname>_SDA_BASE_</varname> for
						a symbol in .sdata or .sbss, <varname>_SDA2_BASE_</varname> for a symbol
						in .PPC.EMB.sdata2 or .PPC.EMB.sbss2, or 0 for a symbol in
						.PPC.EMB.sdata0 or .PPC.EMB.sbss0. If the symbol is not in one of those
						sections, the link shall fail.</para>

					</listitem>

				</varlistentry>

				<varlistentry CONDITION="ATR-VLE">
					<term><emphasis role="bold">R_PPC_VLE_SDA21</emphasis></term>
					
					<listitem>

						<para>The link editor computes a 21-bit value with the 5 MSBs having the
						value 13 (for r13), 2 (for r2), or 0. If the symbol whose index is
						in <varname>r_info</varname> is contained in .sdata or .sbss, the link editor supplies a value of
						13; if the symbol is in .PPC.EMB.sdata2 or .PPC.EMB.sbss2, the link editor
						supplies a value of 2; if the symbol is in .PPC.EMB.sdata0 or
						.PPC.EMB.sbss0, the link editor supplies a value of 0; otherwise, the link
						fails.  The 16 least significant bits of this 21-bit value are set to the address of the
						symbol plus the relocation entry <varname>r_addend</varname> value minus the appropriate
						base for the symbol section:</para>

						<itemizedlist>
							<listitem>
								<para><varname>_SDA_BASE_</varname> for a symbol in .sdata or .sbss.</para>
                    					</listitem>
                    					<listitem>
								<para><varname>_SDA2_BASE_</varname> for a symbol in .PPC.EMB.sdata2 or .PPC.EMB.sbss2.</para>
                    					</listitem>
                    					<listitem>
								<para>0 for a symbol in .PPC.EMB.sdata0 or .PPC.EMB.sbss0.</para>
                    					</listitem>
                    				</itemizedlist>

						<para>If the 5 MSBs of the computed 21-bit value are nonzero, the link editor
						uses the low21 relocation field, where the 11 MSBs remain unchanged and
						the computed 21-bit value occupies bits 1131. Otherwise, the 5 MSBs of
						the computed 21-bit value are zero, with the following results:</para>

						<itemizedlist>
							<listitem>

								<para>The link editor uses the split20 relocation field,
								where only bits occupying 610 remain unchanged.</para>

                    					</listitem>
							<listitem>
								<para>The 5 MSBs of the 21-bit value are ignored.</para>
                    					</listitem>
							<listitem>

								<para>The next most significant bit is copied to bit 11 and to bits 17 to
								20 as a sign-extension.</para>

                    					</listitem>
							<listitem>
								<para>The next 4 most significant bits are copied to bits 12 to 15.</para>
                    					</listitem>
							<listitem>

								<para>The 11 remaining bits are copied to bits 21 to 31.</para>

                    					</listitem>
							<listitem>

								<para>In the destination word, bits 05 are encoded with
								the binary value 011100, and bit 16 is encoded with the
								binary value 0.</para>

                    					</listitem>
                    				</itemizedlist>

						<note><title>note</title><para>Note: Use of the split20 relocation field
						forces the encoding of the VLE e_li instruction, which can change the
						user's specified instruction.</para></note>

					</listitem>

				</varlistentry>

				<varlistentry CONDITION="ATR-VLE">
					<term><emphasis role="bold">R_PPC_VLE_SDA21_LO</emphasis></term>
					
					<listitem>

						<para>Like R_PPC_VLE_SDA21, except that the &num;lo() operator obtains
						the 16 LSBs of the 21-bit value. The &num;lo() operator is applied after
						the address of the symbol plus the relocation entry <varname>r_addend</varname> value is
						calculated, minus the appropriate base for the symbol's section:
						<VARNAME>_SDA_BASE_</VARNAME> for a symbol in .sdata or .sbss, <varname>_SDA2_BASE_</varname> for a symbol in
						.PPC.EMB.sdata2 or .PPC.EMB.sbss2, or 0 for a symbol in .PPC.EMB.sdata0
						or .PPC.EMB.sbss0. The R_PPC_VLE_SDA21 entry describes applying the
						calculated 21-bit value to the destination word that uses either the
						low21 relocation field or the split20 relocation field.</para>

						<note><title>note</title><para>Note: If the opcode is changed, 27 bits are changed instead of 21.</para></note>



					</listitem>

				</varlistentry>

			</variablelist>

			<note CONDITION="ATR-EABI && ATR-VLE">
			
				<title> NOTE</title>
			
				<para>Note: The relocations R_PPC_VLE_SDA21 and R_PPC_VLE_SDA21_LO are not for load and store instructions (such as, e_lwz
				and e_stw), which should use the EABI relocation R_PPC_EMB_SDA21. These relocations, as written here, only start with an
				e_add16i. A link editor might convert the instruction to an e_li. Although other relocations do not specify the instructions they
				apply to, it may be useful to know that these relocations can apply only to one instruction.</para>
			
			</note>
	
			</sect2>
	</sect1>
	<sect1 CONDITION="ATR-EABI" id="EABI-RELOCATIONS-AND-LINKING">
		<title>EABI Relocations and Linking</title> 

		<para>An EABI conforming link editor shall support all of the relocations types in <emphasis><xref
		linkend="RELOCATION-TABLE"></emphasis> except for those listed in <emphasis><xref linkend="EABI-EXTENDED-RELOCATIONS"></emphasis>.</para>

		<para>The relocatable fields of EABI relocation types shall have no alignment restrictions as indicated in <emphasis><xref linkend="RELOCATION-FIELDS"></emphasis>.</para>

		<table id="EABI-EXTENDED-RELOCATIONS" frame="none">
			<title>Relocation Types For EABI Extended Conformance</title>
			<tgroup cols='4' colsep='0' rowsep='0'>
				<colspec colwidth='160' colname='c1' align="left">
				<tbody>

					<row>
						<entry>R_PPC_GOT16</entry>
					</row>
					<row>
						<entry>R_PPC_GOT16_LO</entry>
					</row>
					<row>
						<entry>R_PPC_GOT16_HI</entry>
					</row>
					<row>
						<entry>R_PPC_GOT16_HA</entry>
					</row>
					<row>
						<entry>R_PPC_PLT24</entry>
					</row>
					<row>
						<entry>R_PPC_COPY</entry>
					</row>
					<row>
						<entry>R_PPC_GLOB_DAT</entry>
					</row>
					<row>
						<entry>R_PPC_JMP_SLOT</entry>
					</row>
					<row>
						<entry>R_PPC_LOCAL24PC</entry>
					</row>
					<row>
						<entry>R_PPC_PLT32</entry>
					</row>
					<row>
						<entry>R_PPC_PLTREL32</entry>
					</row>
					<row>
						<entry>R_PPC_PLT16_LO</entry>
					</row>
					<row>
						<entry>R_PPC_PLT16_HI</entry>
					</row>
					<row>
						<entry>R_PPC_PLT16_HA</entry>
					</row>
				</tbody>
			</tgroup>
		</table>

		<para CONDITION="ATR-EABI-EXTENDED">Under EABI extended conformance a link editor shall support all of
		the relocation types in <emphasis><xref linkend="RELOCATION-TABLE"></emphasis>, including those listed in <emphasis><xref
		linkend="EABI-EXTENDED-RELOCATIONS"></emphasis>, and a dynamic linker shall support all relocation types
		appropriate to dynamic linking.</para>

		<para>A link editor shall not accept a relocation entry whose relocation type is not defined in <emphasis><xref
		linkend="RELOCATION-TABLE"></emphasis>.</para>

		<para CONDITION="ATR-EABI-EXTENDED">Under EABI extended conformance, a dynamic linker shall not process a
		relocation entry whose relocation type is not defined in <emphasis><xref
		linkend="RELOCATION-TABLE"></emphasis>.</para>

		</sect1>
	<sect1 id="TLS-ABI" CONDITION="ATR-TLS" >
		<title>Thread Local Storage ABI</title> 

		<para>The document <link linkend="REFERENCES"><emphasis>ELF Handling for Thread-Local
		Storage</emphasis></link> (see <emphasis><xref linkend="REFERENCES"></emphasis>) is the
		authoritative TLS ABI specification that defines the context in which information in this 32-bit Power
		Architecture TLS ABI must be viewed.  In order to maintain congruence with that document, in this
		section the term <emphasis>module</emphasis> refers to an executable or shared object since both are
		treated similarly.</para>

		<sect2 id="TLS-BACKGROUND"><title>TLS Background</title>

			<para> Most C/C++ implementations support (as a proposed extension to the language) the keyword
			<varname>__thread</varname> (the ISO C1X draft uses <varname>_Thread_local</varname> as
			the keyword, while C++0X uses <varname>thread_local</varname>) to be used as a
			storage-class specifier in variable declarations and definitions of data objects with thread storage
			duration. A variable declared in this manner is automatically allocated local to each thread and
			its lifetime is defined to be the entire execution of the thread.  Any initialization value is
			assigned once before thread startup.  </para>

		</sect2>
		<sect2 id="TLS-RUNTIME-HANDLING"><title>TLS Runtime Handling</title>


			<para>A thread-local variable is completely identified by the module in which it is defined,
			along with the offset of the variable relative to the start of the TLS block for the module. A module
			 is referenced by its index (an integer starting with 1, assigned by the run-time
			environment) into the Dynamic Thread Vector. The offset of the variable is kept in the <varname>st_value</varname> field of the TLS variable's symbol table entry.</para>

			<para>The TLS data structures follow variant I of the ELF TLS ABI. For the 32-bit Power
			Architecture, the specific organization of the data structures is as follows.</para>


			<para>The Thread Control Block (TCB) is 8 bytes long, with its first 4 bytes containing the
			pointer to the Dynamic Thread Vector (DTV). Modules that will not be unloaded will be present at
			startup time; the TLS blocks for these are created consecutively and immediately follow the TCB.
			The offset of the TLS block of an initially available module from the TCB remains fixed after
			program start.</para>

			<para>The <varname>tlsoffset(m)</varname> values for a module with index <emphasis>m</emphasis>,
			 where <emphasis>m</emphasis> ranges 1 through <emphasis>M</emphasis>, <emphasis>M</emphasis> being the total number of modules, are computed as follows.</para>
				
			<itemizedlist mark='none'>
				<listitem override='none'><programlisting>
tlsoffset(1) = round(16, align(1))
  tlsoffset(m + 1) = round(tlsoffset(m) + tlssize(m), align(m + 1))</programlisting></listitem>

				<listitem override='bullet'>
					<para>The function <varname>round()</varname> returns its first argument rounded up to the next multiple of its second argument:</para>
					<itemizedlist mark='none'>
						<listitem override='none'>
							<programlisting>round(x, y) = y * ceiling(x / y)</programlisting>
						</listitem>

						<listitem override='bullet'>
							<para>The function <varname>ceiling()</varname> returns the
							smallest integer greater than or equal to its argument, where
							<emphasis>n</emphasis> is an integer satisfying:
							<emphasis>n</emphasis> &minus; 1 &lt; <emphasis>x</emphasis>
							&lt;&equals; <emphasis>n</emphasis>:</para>

				    			<itemizedlist mark='none'>
								<listitem override='none'><programlisting>ceiling(x) = n</programlisting></listitem>
							</itemizedlist>
						</listitem>
       					</itemizedlist>
				</listitem>
			</itemizedlist>
				
			<para>In the case of Dynamic Shared Objects (DSO), TLS blocks
			are allocated on an as-needed basis, with the details of allocation abstracted away by the
			<varname>__tls_get_addr()</varname> function which is used to retrieve the address
			of <emphasis>any</emphasis> TLS variable.</para>

			<para>The prototype for the <varname>__tls_get_addr()</varname> function, is defined as follows.</para>

			<itemizedlist mark='none'>
				<listitem><programlisting>
  typedef struct
    {
      unsigned long int ti_module;
      unsigned long int ti_offset;
    } tls_index;
				
  extern void *__tls_get_addr (tls_index *ti);</programlisting></listitem>
     			</itemizedlist>

			<para>The Thread Pointer (TP) is held in r2 and is used to
			access the TCB. The TP is initialized to point 0x7000 bytes past the end of the TCB. The TP offset
			allows for efficient addressing of the TCB and up to 4K-8B of other thread library
			information (placed before the TCB).</para>

			<para>The following diagram shows the region of memory before and after the TCB that can be
			efficiently addressed by the TP:</para>

			<figure id="TP-ADDRESSIBLE-MEMORY"><title>Thread Pointer Addressable Memory</title>
			<mediaobject><imageobject><imagedata scale=67 fileref="graphics/TP-AddressableMemory.png" format="PNG"></imageobject></mediaobject>
</figure>

			<para>Each DTV pointer points 0x8000 bytes past the start of
			each TLS block. (For implementation reasons, the actual value stored in the DTV may point to the
			start of a TLS block, however values returned by accessor functions will be offset by 0x8000
			bytes). This offset allows the first 64 KB of each block to be addressed from a DTV pointer using
			fewer machine instructions.</para>

			<figure id="TLS-BLOCK-DIAGRAM"><title>TLS Block Diagram</title>
			<mediaobject><imageobject><imagedata scale=67 fileref="graphics/TLS-BlockDiagram.png" format="PNG"></imageobject>
			<caption>
				<para>TLS[m] denotes the TLS block for the module with index <emphasis>m</emphasis></para>
				<para>DTV[m] denotes the DTV pointer for the module with index <emphasis>m</emphasis></para>
			</caption>
			</mediaobject>
			</figure>

		</sect2>
     		<sect2 id="TLS-ACCESS-MODELS"><title>TLS Access Models</title>
			<para>TLS data access is categorized into the following models:</para>
     			<itemizedlist mark='opencircle'>
     				<listitem><para><emphasis><link linkend="GENERAL-DYNAMIC-TLS-MODEL">General Dynamic TLS Model</link></emphasis></para></listitem>
     				<listitem><para><emphasis><link linkend="LOCAL-DYNAMIC-TLS-MODEL">Local Dynamic TLS Model</link></emphasis></para></listitem>
     				<listitem><para><emphasis><link linkend="INITIAL-EXEC-TLS-MODEL">Initial Exec TLS Model</link></emphasis></para></listitem>
     				<listitem><para><emphasis><link linkend="LOCAL-EXEC-TLS-MODEL">Local Exec TLS Model</link></emphasis></para></listitem>
  			</itemizedlist>

 			<para>Examples for each access model are provided in the following TLS Model sub-sections.</para>

			<para>For these examples, register r31 holds to the address of the symbol
			<varname>_GLOBAL_OFFSET_TABLE_</varname> in the <emphasis><link linkend="GLOBAL-OFFSET-TABLE">Global Offset Table</link></emphasis>.  A different register may be used for this purpose as
			well.</para>

     			<sect3 id="GENERAL-DYNAMIC-TLS-MODEL"><title>General Dynamic TLS Model</title>
				<para>Given the following code fragment, to determine the address of the a thread-local variable <emphasis>x</emphasis>, the
				<varname> __tls_get_addr()</varname> function is called with one parameter which is a
				pointer to a data object of type <varname>tls_index</varname>.</para>

     				<programlisting>extern __thread int x;
&amp;x;</programlisting>

				<table frame="none">
					<title>General Dynamic Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='130' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>addi 3,31,x@got@tlsgd</entry>
								<entry>R_PPC_GOT_TLSGD16</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>bl __tls_get_addr(x@tlsgd)</entry>
								<entry>R_PPC_TLSGD</entry>
								<entry>x</entry>
							</row>
							<row>
								<entry></entry>
								<entry>R_PPC_REL24</entry>
								<entry>__tls_get_addr</entry>
							</row>
							
						</tbody>
					</tgroup>
				</table>

				<table frame="none">
					<title>General Dynamic Outstanding Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>GOT[n]</entry>
								<entry>R_PPC_DTPMOD32</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>GOT[n+1]</entry>
								<entry>R_PPC_DTPREL32</entry>
								<entry>x</entry>
							</row>
							
						</tbody>
					</tgroup>
				</table>

				<para>The relocation specifier <emphasis>@got@tlsgd</emphasis> causes the link editor to
				create a data object of type <varname>tls_index</varname> in the GOT. The
				address of this data object is loaded into the first argument register with the <varname>addi</varname>
				instruction, and a standard function call is made.</para>

     			</sect3>
     			<sect3 id="LOCAL-DYNAMIC-TLS-MODEL"><title>Local Dynamic TLS Model</title>
     				<para>For the Local Dynamic TLS Model two different relocation sequences may be used, depending on the size of the offset to the variable.  For the following code sequence a different relocation sequence is used for each variable.</para>
     				<programlisting>static __thread int x1;
static __thread int x2;
				
&amp;x1;
&amp;x2;
     				</programlisting>


				<table frame="none">
					<title>Local Dynamic Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='130' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>addi 3,31,x1@got@tlsld</entry>
								<entry>R_PPC_GOT_TLSLD16</entry>
								<entry>x1</entry>
							</row>

							<row>
								<entry>bl __tls_get_addr(x1@tlsld)</entry>
								<entry>R_PPC_TLSLD</entry>
								<entry>x1</entry>
							</row>
							<row>
								<entry></entry>
								<entry>R_PPC_REL24</entry>
								<entry>__tls_get_addr</entry>
							</row>
							<row>
								<entry>...</entry>
								<entry></entry>
								<entry></entry>
							</row>
							<row>
								<entry>addi 9,3,x1@dtprel</entry>
								<entry>R_PPC_DTPREL16</entry>
								<entry>x1</entry>
							</row>
							<row>
								<entry>...</entry>
								<entry></entry>
								<entry></entry>
							</row>
							<row>
								<entry>addis 9,3,x2@dtprel@ha</entry>
								<entry>R_PPC_DTPREL16_HA</entry>
								<entry>x2</entry>
							</row>
							<row>
								<entry>addi 9,9,x2@dtprel@l</entry>
								<entry>R_PPC_DTPREL16_LO</entry>
								<entry>x2</entry>
							</row>
							
						</tbody>
					</tgroup>
				</table>

				<table frame="none">
					<title>Local Dynamic Outstanding Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>GOT[n]</entry>
								<entry>R_PPC_DTPMOD32</entry>
								<entry>x1</entry>
							</row>
							
							<row>
								<entry>GOT[n+1]</entry>
								<entry>0</entry>
								<entry></entry>
							</row>
							
						</tbody>
					</tgroup>
				</table>

				<para>The relocation specifier <emphasis>@got@tlsld</emphasis> in the first instruction
				causes the link editor to generate a <emphasis
				role="bold"><varname>tls_index</varname></emphasis> data object in the GOT with a fixed 0
				offset.  The code shown assumes that x1 is in the first 64k of the thread storage block,
				while x2 is not. To load the values of x1 and x2 instead of the address, access int variables with the following.</para>

				<informaltable frame="none">
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<tbody>
							<row>
								<entry>...</entry>
								<entry></entry>
								<entry></entry>
							</row>
							<row>
								<entry>lwz 0,x1@dtprel(3)</entry>
								<entry>R_PPC_DTPREL16</entry>
								<entry>x1</entry>
							</row>
							<row>
								<entry>...</entry>
								<entry></entry>
								<entry></entry>
							</row>
							<row>
								<entry>addis 9,3,x2@dtprel@ha</entry>
								<entry>R_PPC_DTPREL16_HA</entry>
								<entry>x2</entry>
							</row>
							<row>
								<entry>lwz 0,x2@dtprel@l(9)</entry>
								<entry>R_PPC_DTPREL16_LO</entry>
								<entry>x2</entry>
							</row>
						</tbody>
					</tgroup>
				</informaltable>



     			</sect3>
     			<sect3 id="INITIAL-EXEC-TLS-MODEL"><title>Initial Exec TLS Model</title>
     				<para>Given the following code fragment the relocation sequence in <emphasis><xref linkend="IEIR"></emphasis> is used for the Initial Exec TLS Model.</para>

     				<programlisting>extern __thread int x;
&amp;x;</programlisting>

				<table id="IEIR" frame="none">
					<title>Initial Exec Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>lwz 9,x@got@tprel(31)</entry>
								<entry>R_PPC_GOT_TPREL16</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>add 9,9,x@tls</entry>
								<entry>R_PPC_TLS</entry>
								<entry>x</entry>
							</row>
							
						</tbody>
					</tgroup>
				</table>

				<table frame="none">
					<title>Initial Exec Outstanding Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>GOT[n]</entry>
								<entry>R_PPC_TPREL32</entry>
								<entry>x</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<para>The relocation specifier <emphasis>@got@tprel</emphasis> in the first instruction
				causes the link editor to generate a GOT entry with a relocation that the dynamic linker will
				replace with the offset for x relative to the thread pointer.  The relocation specifier
				<emphasis>x@tls</emphasis> tells the assembler to use an r2 form of the instruction, i.e.,
				<varname>add 9,9,2</varname> in this case, and tag the instruction with a relocation
				that indicates it belongs to a TLS sequence.  This relocation specifier can be used later by the link editor when
				optimizing TLS code.</para>

				<para>To read the contents of the variable instead of calculating its address, the
				<varname>add 9,9,x@tls</varname> instruction might be replaced with <varname>lwzx
				0,9,x@tls</varname></para>


     			</sect3>
     			<sect3 id="LOCAL-EXEC-TLS-MODEL"><title>Local Exec TLS Model</title>

				<para>Given the following code fragment, two different relocation sequences may be used,
				depending on the size of the offset to the variable.  The sequence in <emphasis><xref
				linkend="LEIR-SEQUENCE-ONE"></emphasis> handles offsets within 60KB relative to the end of
				the TCB (where r2 points 28KB past the end of the TCB, which is immediately before the
				first TLS block).  The sequence in <emphasis><xref linkend="LEIR-SEQUENCE-TWO"></emphasis>
				handles offsets past 60KB relative to the end of the TCB..</para>

				<programlisting>static __thread int x;
&amp;x;</programlisting>

				<para>The following diagram illustrates which sequence is used:</para>

			<figure id="TLS-SEQUENCES"><title>Local Exec TLS Model Sequences</title>
			<mediaobject><imageobject><imagedata scale=67 fileref="graphics/LocalExec-ModelSequence.png" format="PNG"></imageobject></mediaobject>
			</figure>

				<table id="LEIR-SEQUENCE-ONE" frame="none">
					<title>Local Exec Initial Relocations (Sequence 1)</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>addi 9,2,x1@tprel</entry>
								<entry>R_PPC_TPREL16</entry>
								<entry>x</entry>
							</row>
						
						</tbody>
					</tgroup>
				</table>

				<table id="LEIR-SEQUENCE-TWO" frame="none">
					<title>Local Exec Initial Relocations (Sequence 2)</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>addis 9,2,x2@tprel@ha</entry>
								<entry>R_PPC_TPREL16_HA</entry>
								<entry>x</entry>
							</row>
							<row>
								<entry>addi 9,9,x2@tprel@l</entry>
								<entry>R_PPC_TPREL16_LO</entry>
								<entry>x</entry>
							</row>
							
						</tbody>
					</tgroup>
				</table>

     			</sect3>
     		</sect2>
     		<sect2 id="LINKER-OPTIMIZATIONS"><title>TLS Link Editor Optimizations</title>
     					
			<para>When the link editor knows if the code being generated is for an executable file or for a shared
			object file, or when a reference to a thread-local variable in the executable is unconditionally
			satisfied by a definition in the executable itself, the link editor can optimize the computation of a
			variable's address provided the compiler emits code sequences as described.</para>

			<para>The following TLS link editor transformations are provided as optimizations to convert between specific <emphasis><link linkend="TLS-ACCESS-MODELS">TLS Access Models</link></emphasis>:</para>

     			<itemizedlist mark='opencircle'>
     				<listitem><para><emphasis><link linkend="GENERAL-DYNAMIC-TO-INITIAL-EXEC">General Dynamic to Initial Exec</link></emphasis></para></listitem>
     				<listitem><para><emphasis><link linkend="GENERAL-DYNAMIC-TO-LOCAL-EXEC">General Dynamic to Local Exec</link></emphasis></para></listitem>
     				<listitem><para><emphasis><link linkend="LOCAL-DYNAMIC-TO-LOCAL-EXEC">Local Dynamic to Local Exec</link></emphasis></para></listitem>
     				<listitem><para><emphasis><link linkend="INITIAL-EXEC-TO-LOCAL-EXEC">Initial Exec to Local Exec</link></emphasis></para></listitem>
  			</itemizedlist>

     			<sect3 id="GENERAL-DYNAMIC-TO-INITIAL-EXEC"><title>General Dynamic to Initial Exec</title>
				<table frame="none">
					<title>General Dynamic to Initial Exec Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='130' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>addi 3,31,x@got@tlsgd</entry>
								<entry>R_PPC_GOT_TLSGD16</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>bl __tls_get_addr(x@tlsgd)</entry>
								<entry>R_PPC_TLSGD</entry>
								<entry>x</entry>
							</row>
							<row>
								<entry></entry>
								<entry>R_PPC_REL24</entry>
								<entry>__tls_get_addr</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<table frame="none">
					<title>General Dynamic to Initial Exec Outstanding Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>GOT[n]</entry>
								<entry>R_PPC_DTPMOD32</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>GOT[n&plus;1]</entry>
								<entry>R_PPC_DTPREL32</entry>
								<entry>x</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<para>The preceding relocations are replaced by the following relocations.</para>

				<table frame="none">
					<title>General Dynamic to Initial Exec Replacement Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>lwz 3,x@got@tprel(31)</entry>
								<entry>R_PPC_GOT_TPREL16</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>add 3,3,2</entry>
								<entry></entry>
								<entry></entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<table frame="none">
					<title>General Dynamic to Initial Exec Replacement Outstanding Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>GOT[n]</entry>
								<entry>R_PPC_TPREL32</entry>
								<entry>x</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

     			</sect3>
     			<sect3 id="GENERAL-DYNAMIC-TO-LOCAL-EXEC"><title>General Dynamic to Local Exec</title>
				<table frame="none">
					<title>General Dynamic to Local Exec Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='130' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>addi 3,31,x@got@tlsgd</entry>
								<entry>R_PPC_GOT_TLSGD16</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>bl __tls_get_addr(x@tlsgd)</entry>
								<entry>R_PPC_TLSGD</entry>
								<entry>x</entry>
							</row>
							<row>
								<entry></entry>
								<entry>R_PPC_REL24</entry>
								<entry>__tls_get_addr</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<table frame="none">
					<title>General Dynamic to Local Exec Outstanding Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>GOT[n]</entry>
								<entry>R_PPC_DTPMOD32</entry>
								<entry>x</entry>
							</row>
							<row>
								<entry>GOT[n&plus;1]</entry>
								<entry>R_PPC_DTPREL32</entry>
								<entry>x</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<para>The preceding initial relocations are replaced by the following initial relocations.  This optimization does not replace the preceding outstanding relocations.</para>

				<table frame="none">
					<title>General Dynamic to Local Exec Replacement Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>addis 3,2,x@tprel@ha</entry>
								<entry>R_PPC_TPREL16_HA</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>addi 3,3,x@tprel@l</entry>
								<entry>R_PPC_TPREL16_LO</entry>
								<entry>x</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

     			</sect3>
     			<sect3 id="LOCAL-DYNAMIC-TO-LOCAL-EXEC"><title>Local Dynamic to Local Exec</title>

				<para>Under this TLS linker optimization, the function call is replaced with an equivalent code sequence. As
				shown, the following <emphasis>dtprel</emphasis> sequences are left unchanged.</para>

				<table frame="none">
					<title>Local Dynamic To Local Exec Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='130' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>addi 3,31,x1@got@tlsld</entry>
								<entry>R_PPC_GOT_TLSLD16</entry>
								<entry>x1</entry>
							</row>
							
							<row>
								<entry>bl __tls_get_addr(x1@tlsld)</entry>
								<entry>R_PPC_TLSLD</entry>
								<entry>x1</entry>
							</row>
							<row>
								<entry></entry>
								<entry>R_PPC_REL24</entry>
								<entry>__tls_get_addr</entry>
							</row>
							<row>
								<entry>..</entry>
								<entry></entry>
								<entry></entry>
							</row>
							<row>
								<entry>addi 9,3,x1@dtprel</entry>
								<entry>R_PPC_DTPREL16</entry>
								<entry>x1</entry>
							</row>
							<row>
								<entry>..</entry>
								<entry></entry>
								<entry></entry>
							</row>
							<row>
								<entry><varname>addis</varname> 9,3,x2@dtprel@ha</entry>
								<entry>R_PPC_DTPREL16_HA</entry>
								<entry>x2</entry>
							</row>
							<row>
								<entry>addi 9,9,x2@dtprel@l</entry>
								<entry>R_PPC_DTPREL16_LO</entry>
								<entry>x2</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<table frame="none">
					<title>Local Dynamic To Local Exec Outstanding Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>GOT[n]</entry>
								<entry>R_PPC_DTPMOD32</entry>
								<entry>x1</entry>
							</row>
							<row>
								<entry>GOT[n&plus;1]</entry>
								<entry></entry>
								<entry></entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<para>The preceding relocations are replaced by the following relocations.  This optimization does not replace the preceding outstanding relocations.</para>

				<table frame="none">
					<title>Local Dynamic To Local Exec Replacement Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='120' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry><varname>addis</varname> 3,2,L@tprel@ha</entry>
								<entry>R_PPC_TPREL16_HA</entry>
								<entry><emphasis>link editor generated local symbol</emphasis></entry>
							</row>
							
							<row>
								<entry>addi 3,3,L@tprel@l</entry>
								<entry>R_PPC_TPREL16_LO</entry>
								<entry><emphasis>link editor generated local symbol</emphasis></entry>
							</row>
							<row>
								<entry>..</entry>
								<entry></entry>
								<entry></entry>
							</row>
							<row>
								<entry>addi 9,3,x1@dtprel</entry>
								<entry>R_PPC_DTPREL16</entry>
								<entry>x1</entry>
							</row>
							<row>
								<entry>..</entry>
								<entry></entry>
								<entry></entry>
							</row>
							<row>
								<entry><varname>addis</varname> 9,3,x2@dtprel@ha</entry>
								<entry>R_PPC_DTPREL16_HA</entry>
								<entry>x2</entry>
							</row>
							<row>
								<entry>addi 9,9,x2@dtprel@l</entry>
								<entry>R_PPC_DTPREL16_LO</entry>
								<entry>x2</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<para>The <emphasis>link editor generated local symbol</emphasis> points to the start of the
				thread storage block plus 0x7000 bytes.  In practice, a section symbol with a suitable
				offset will be used.</para>


     			</sect3>
     			<sect3 id="INITIAL-EXEC-TO-LOCAL-EXEC"><title>Initial Exec to Local Exec</title>

				<table frame="none">
					<title>Initial Exec to Local Exec Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>lwz 9,x@got@tprel(31)</entry>
								<entry>R_PPC_GOT_TPREL16</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>add 9,9,x@tls</entry>
								<entry>R_PPC64_TLS</entry>
								<entry>x</entry>
							</row>
							
						</tbody>
					</tgroup>
				</table>

				<table frame="none">
					<title>Initial Exec to Local Exec Outstanding Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>GOT[n]</entry>
								<entry>R_PPC_TPREL32</entry>
								<entry>x</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<para>The preceding relocations are replaced by the following relocations.  This optimization does not replace the preceding outstanding relocations.</para>

				<table frame="none">
					<title>Initial Exec to Local Exec Replacement Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry><varname>addis</varname> 9,2,x@tprel@ha</entry>
								<entry>R_PPC_TPREL16_HA</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>addi 9,9,x@tprel@l</entry>
								<entry>R_PPC_TPREL16_LO</entry>
								<entry>x</entry>
							</row>
							
						</tbody>
					</tgroup>
				</table>

				<para>Other sizes and types of thread-local variables may use any of the X-form indexed
				load or store instructions.  The <emphasis>lwz</emphasis> and <emphasis>add</emphasis>
				instruction, in this case, can have interleaved code inserted by the compiler.</para>

				<para><emphasis><xref linkend="INIT-RELOCS-IE-LE"></emphasis> shows how to access the contents of a variable using the X-form indexed load and store instructions.</para>

				<table id="INIT-RELOCS-IE-LE"frame="none">
					<title>Initial Exec to Local Exec X-form Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>lwz 9,x@got@tprel(31)</entry>
								<entry>R_PPC_GOT_TPREL16</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>lbzx 10,9,x@tls</entry>
								<entry>R_PPC_TLS</entry>
								<entry></entry>
							</row>
							<row>
								<entry>addi 10,10,1</entry>
								<entry></entry>
								<entry></entry>
							</row>
							<row>
								<entry>stbx 10,9,x@tls</entry>
								<entry>R_PPC_TLS</entry>
								<entry>x</entry>
							</row>
							
						</tbody>
					</tgroup>
				</table>

				<table frame="none">
					<title>Initial Exec to Local Exec X-form Outstanding Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>GOT[n]</entry>
								<entry>R_PPC_TPREL32</entry>
								<entry>x</entry>
							</row>
						</tbody>
					</tgroup>
				</table>

				<para>The preceding relocations are replaced by the following relocations.  This optimization does not replace the preceding outstanding relocations.</para>

				<table frame="none">
					<title>Initial Exec to Local Exec X-form Replacement Initial Relocations</title>
					<tgroup cols='3' colsep='0' rowsep='0'>
						<colspec colwidth='120' colname='c1' align="left">
						<colspec colwidth='120' colname='c2' align="left">
						<colspec colwidth='70' colname='c3' align="left">
						<thead>
							<row>
								<entry namest="c1" rowsep='1'>Code Sequence</entry>
								<entry namest="c2" rowsep='1'>Relocation</entry>
								<entry namest="c3" rowsep='1'>Symbol</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry><varname>addis</varname> 9,2,x@tprel@ha</entry>
								<entry>R_PPC_TPREL16_HA</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>lbz 10,x@tprel@l(9)</entry>
								<entry>R_PPC_TPREL16_LO</entry>
								<entry>x</entry>
							</row>
							
							<row>
								<entry>addi 10,10,1</entry>
								<entry></entry>
								<entry></entry>
							</row>
							
							<row>
								<entry>stb 10,x@tprel@l(9)</entry>
								<entry>R_PPC_TPREL16_LO</entry>
								<entry>x</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</sect3>	
		</sect2>
		<sect2 id="ELF-TLS-DEFINITIONS">
			<title>ELF TLS Definitions</title>

			<para>The result of performing a relocation for a TLS symbol is module ID and its offset
			within the TLS block. These are then stored in the <emphasis><xref
			linkend="GLOBAL-OFFSET-TABLE"></emphasis> and later obtained by the dynamic linker at run-time
			and passed to <varname>__tls_get_addr()</varname>, which returns the address for
			the variable for the current thread.</para>
 
			<para>The following notations are use to the explain the expressions in the <emphasis><xref linkend="TLS-RELOCATION-TABLE"></emphasis>:</para>

			<variablelist>
				<varlistentry>
					<term><emphasis role="bold">S</emphasis></term>
					<listitem>
						<para>Represents the value of the symbol whose index resides in the relocation entry.</para>
					</listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">A</emphasis></term>
					<listitem>
						<para>Represents the addend used to compute the value of the relocatable field.</para>
					</listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">tp</emphasis></term>
					<listitem>
						<para>The value of the thread pointer in general-purpose register 2 (r2).</para>
					</listitem>
				</varlistentry>
	
				<varlistentry>
					<term><emphasis role="bold">TLS_TP_OFFSET</emphasis></term>
					<listitem>
						<para>The constant value 0x7000, representing the offset (in bytes) of the location the thread pointer is initialized to point to, relative to the start of the thread local storage for the first initially available module.</para>
					</listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">TCB_LENGTH</emphasis></term>
					<listitem>
						<para>The constant value 0x8, representing the length of the TCB in bytes.</para>
					</listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">tcb</emphasis></term>
					<listitem>
						<para>Represents the base address of the TCB.</para>
						<para>tcb = (tp - (TLS_TP_OFFSET + TCB_LENGTH))</para>
					</listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">dtv</emphasis></term>
					<listitem>
						<para>Represents the base address of the DTV.</para>
						<para>dtv = tcb[0]</para>
					</listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">dtpmod</emphasis></term>
					<listitem>
		
						<para>Represents the load module index of the load module that contains the
						definition of the symbol being relocated and is used to index the DTV.</para>
		
					</listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">dtprel</emphasis></term>
					<listitem>
		
						<para>Represents the offset of the symbol being relocated relative to the value of dtv[dtpmod].</para>
						<para>dtv[dtpmod] &plus; dtprel = (S &plus; A)</para>
		
					</listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">tprel</emphasis></term>
					<listitem>
		
						<para>Represents the offset of the symbol being relocated relative to TP.</para>
						<para>tp &plus; tprel = (S &plus; A)</para>
		
					</listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">tlsgd</emphasis></term>
					<listitem>
		
						<para>Allocates two contiguous entries in the GOT to hold a tls_index structure,
						with values dtpmod and dtprel, and computes the offset of the first entry within
						the GOT.</para>
		
						<itemizedlist mark='none'>
							<listitem>
								<para>If <emphasis>n</emphasis> is the offset computed:</para>
								<itemizedlist mark='none'>
									<listitem>
										<para><varname>_GLOBAL_OFFSET_TABLE_</varname>[<emphasis>n</emphasis>] &equals; dtpmod</para>
									</listitem>
									<listitem>
										<para><varname>_GLOBAL_OFFSET_TABLE_</varname>[<emphasis>n</emphasis> &plus; 1] &equals; dtprel</para>
									</listitem>
								</itemizedlist>
							</listitem>
							<listitem>
								<para>The call to __tls_get_addr () would happen as:</para>
								<itemizedlist mark='none'>
									<listitem>
										<para>__tls_get_addr ((tls_index *) &amp;<varname>_GLOBAL_OFFSET_TABLE_</varname>[<emphasis>n</emphasis>])</para>
									</listitem>
								</itemizedlist></listitem></itemizedlist></listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">tlsld</emphasis></term>
					<listitem>
		
						<para>Allocates two contiguous entries in the GOT to hold a tls_index structure,
						with values dtpmod and zero, and computes the offset of the first entry within
						the GOT.</para>
		
						<itemizedlist mark='none'>
							<listitem>
								<para>If <emphasis>n</emphasis> is the offset computed:</para>
								<itemizedlist mark='none'>
									<listitem>
										<para><varname>_GLOBAL_OFFSET_TABLE_</varname>[<emphasis>n</emphasis>] &equals; dtpmod</para>
									</listitem>
									<listitem>
										<para><varname>_GLOBAL_OFFSET_TABLE_</varname>[<emphasis>n</emphasis> &plus; 1] &equals; 0</para>
									</listitem>
								</itemizedlist>
							</listitem>
							<listitem>
								<para>The call to __tls_get_addr () would happen as:</para>
								<itemizedlist mark='none'>
									<listitem>
										<para>__tls_get_addr ((tls_index *) &amp;<varname>_GLOBAL_OFFSET_TABLE_</varname>[<emphasis>n</emphasis>])</para>
									</listitem>
								</itemizedlist>
							</listitem></itemizedlist></listitem>
				</varlistentry>
		
				<varlistentry>
					<term><emphasis role="bold">tprelg</emphasis></term>
					<listitem>
		
						<para>Allocates an entry in the GOT with value tprel, and computes the offset of
						the entry within the GOT.</para>
		
						<itemizedlist mark='none'>
							<listitem>
								<para>If <emphasis>n</emphasis> is the offset computed:</para>
								<itemizedlist mark='none'>
									<listitem>
										<para><varname>_GLOBAL_OFFSET_TABLE_</varname>[<emphasis>n</emphasis>] &equals; tprel</para>
									</listitem>
								</itemizedlist>
							</listitem>
							<listitem>
								<para>The value of tprel is loaded into a register from the location
								(<varname>_GLOBAL_OFFSET_TABLE_</varname> &plus; <emphasis>n</emphasis>) to be used in an r2 form instruction.</para>
							</listitem></itemizedlist></listitem>
				</varlistentry>
			</variablelist>
		
			<note><title>note</title><para> Note: Relocations not using the &num;ha(), &num;hi(), and &num;lo() modifiers (those flagged with and asterisk(*) will trigger a relocation failure if the value computed does not fit in the field specified.</para></note>

			<table id="TLS-RELOCATION-TABLE" frame="none"><title>TLS Relocation Table</title>
				<tgroup cols='4' colsep='0' rowsep='0'>
					<colspec colwidth='160' colname='c1' align="left">
					<colspec colwidth='40' colname='c2' align="center">
					<colspec colwidth='60' colname='c3' align="left">
					<colspec colwidth='120' colname='c4' align="left">
					<thead>
						<row>
							<entry namest="c1" rowsep='1'>Relocation Name</entry>
							<entry namest="c2" rowsep='1'>Value</entry>
							<entry namest="c3" rowsep='1'>Field</entry>
							<entry namest="c4" rowsep='1'>Expression</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry namest="c1">R_PPC_TLS</entry>
							<entry namest="c2">67</entry>
							<entry namest="c3">none</entry>
							<entry namest="c4">none</entry>
						</row>
						<row>
							<entry namest="c1">R_PPC_DTPMOD32</entry>
							<entry namest="c2">68</entry>
							<entry namest="c3">word32</entry>
							<entry namest="c4">dtpmod</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_TPREL16</entry>              
							<entry namest="c2">69</entry>        
							<entry namest="c3">half16*</entry>      
							<entry namest="c4">tprel</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_TPREL16_LO</entry>           
							<entry namest="c2">70</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;lo(tprel)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_TPREL16_HI</entry>           
							<entry namest="c2">71</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;hi(tprel)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_TPREL16_HA</entry>           
							<entry namest="c2">72</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;ha(tprel)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_TPREL32</entry>              
							<entry namest="c2">73</entry>        
							<entry namest="c3">word32</entry>       
							<entry namest="c4">tprel</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_DTPREL16</entry>             
							<entry namest="c2">74</entry>        
							<entry namest="c3">half16*</entry>      
							<entry namest="c4">dtprel</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_DTPREL16_LO</entry>          
							<entry namest="c2">75</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;lo(dtprel)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_DTPREL16_HI</entry>          
							<entry namest="c2">76</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;hi(dtprel)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_DTPREL16_HA</entry>          
							<entry namest="c2">77</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;ha(dtprel)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_DTPREL32</entry>             
							<entry namest="c2">78</entry>        
							<entry namest="c3">word32</entry>       
							<entry namest="c4">dtprel</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TLSGD16</entry>          
							<entry namest="c2">79</entry>        
							<entry namest="c3">half16*</entry>      
							<entry namest="c4">tlsgd</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TLSGD16_LO</entry>       
							<entry namest="c2">80</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;lo(tlsgd)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TLSGD16_HI</entry>       
							<entry namest="c2">81</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;hi(tlsgd)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TLSGD16_HA</entry>       
							<entry namest="c2">82</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;ha(tlsgd)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TLSLD16</entry>          
							<entry namest="c2">83</entry>        
							<entry namest="c3">half16*</entry>      
							<entry namest="c4">tlsld</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TLSLD16_LO</entry>       
							<entry namest="c2">84</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;lo(tlsld)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TLSLD16_HI</entry>       
							<entry namest="c2">85</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;hi(tlsld)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TLSLD16_HA</entry>       
							<entry namest="c2">86</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;ha(tlsld)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TPREL16</entry>          
							<entry namest="c2">87</entry>        
							<entry namest="c3">half16*</entry>      
							<entry namest="c4">tprelg</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TPREL16_LO</entry>       
							<entry namest="c2">88</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;lo(tprelg)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TPREL16_HI</entry>       
							<entry namest="c2">89</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;hi(tprelg)</entry>
						</row>
	
						<row>
							<entry namest="c1">R_PPC_GOT_TPREL16_HA</entry>       
							<entry namest="c2">90</entry>        
							<entry namest="c3">half16</entry>       
							<entry namest="c4">&num;ha(tprelg)</entry>
						</row>
						<row>
							<entry></entry>
							<entry>91</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Reserved for future TLS ABI use.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>94</entry>
							<entry></entry>
							<entry></entry>
						</row>

						<row>
							<entry namest="c1">R_PPC_TLSGD</entry>       
							<entry namest="c2">95</entry>        
							<entry namest="c3">none</entry>       
							<entry namest="c4">none</entry>
						</row>
						<row>
							<entry namest="c1">R_PPC_TLSLD</entry>       
							<entry namest="c2">96</entry>        
							<entry namest="c3">none</entry>       
							<entry namest="c4">none</entry>
						</row>
						<row>
							<entry></entry>
							<entry>97</entry>
							<entry></entry>
							<entry></entry>
						</row>
						<row>
							<entry></entry>
							<entry valign="middle">...</entry>
							<entry></entry>
							<entry>Reserved for future TLS ABI use.</entry>
						</row>
						<row>
							<entry></entry>
							<entry>100</entry>
							<entry></entry>
							<entry></entry>
						</row>
					</tbody>
				</tgroup>
			</table>

			<variablelist id="TLS-RELOCATION-DESCRIPTIONS">
				<title>TLS Relocation Descriptions</title>
				<varlistentry>
					<term><emphasis role="bold">R_PPC_TLS</emphasis></term>
					<term><emphasis role="bold">R_PPC_TLSGD</emphasis></term>
					<term><emphasis role="bold">R_PPC_TLSLD</emphasis></term>
					<listitem>
						<para>These are marker relocations that tie together instructions in TLS
						code sequences.  They allow the link editor to reliably optimize TLS code.
						<emphasis role="bold">R_PPC_TLSGD</emphasis> and <emphasis role="bold">R_PPC_TLSLD</emphasis> shall be emitted immediately before their
						associated <varname>__tls_get_addr</varname> call relocation.</para>
					</listitem>
				</varlistentry>
			</variablelist>



		</sect2>
	</sect1>
</chapter>
<!-- Keep this comment at the end of the file Local Variables: mode: sgml sgml-parent-document: ("PPC-elf32abi.sgml" "book" "chapter") End: -->
